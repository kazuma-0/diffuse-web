(()=>{var wr=Object.create;var Qt=Object.defineProperty;var kr=Object.getOwnPropertyDescriptor;var Ar=Object.getOwnPropertyNames;var Er=Object.getPrototypeOf,xr=Object.prototype.hasOwnProperty;var Sr=r=>Qt(r,"__esModule",{value:!0});var jt=r=>{if(typeof require!="undefined")return require(r);throw new Error('Dynamic require of "'+r+'" is not supported')};var Tt=(r,u)=>()=>(u||r((u={exports:{}}).exports,u),u.exports);var Tr=(r,u,C)=>{if(u&&typeof u=="object"||typeof u=="function")for(let A of Ar(u))!xr.call(r,A)&&A!=="default"&&Qt(r,A,{get:()=>u[A],enumerable:!(C=kr(u,A))||C.enumerable});return r},Pt=r=>Tr(Sr(Qt(r!=null?wr(Er(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var Ae=Tt((yn,ke)=>{ke.exports=function(u,C,A){return new Promise((S,P)=>{let X=document.createElement("script");X.async=!0,X.src=u;for(let[V,at]of Object.entries(C||{}))X.setAttribute(V,at);X.onload=()=>{X.onerror=X.onload=null,S(X)},X.onerror=()=>{X.onerror=X.onload=null,P(new Error(`Failed to load ${u}`))},(A||document.head||document.getElementsByTagName("head")[0]).appendChild(X)})}});var xe=Tt((Ee,$t)=>{(function(r){typeof Ee=="object"&&typeof $t!="undefined"?$t.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=r()})(function(){return function r(u,C,A){function S(U,V){if(!C[U]){if(!u[U]){var at=typeof jt=="function"&&jt;if(!V&&at)return at(U,!0);if(P)return P(U,!0);var tt=new Error("Cannot find module '"+U+"'");throw tt.code="MODULE_NOT_FOUND",tt}var nt=C[U]={exports:{}};u[U][0].call(nt.exports,function(ft){var yt=u[U][1][ft];return S(yt||ft)},nt,nt.exports,r,u,C,A)}return C[U].exports}for(var P=typeof jt=="function"&&jt,X=0;X<A.length;X++)S(A[X]);return S}({1:[function(r,u,C){(function(A){(function(S){typeof C=="object"&&u!==void 0?u.exports=S():(typeof window!="undefined"?window:A!==void 0?A:typeof self!="undefined"?self:this).JSZip=S()})(function(){return function S(P,X,U){function V(nt,ft){if(!X[nt]){if(!P[nt]){var yt=typeof r=="function"&&r;if(!ft&&yt)return yt(nt,!0);if(at)return at(nt,!0);var bt=new Error("Cannot find module '"+nt+"'");throw bt.code="MODULE_NOT_FOUND",bt}var pt=X[nt]={exports:{}};P[nt][0].call(pt.exports,function(mt){return V(P[nt][1][mt]||mt)},pt,pt.exports,S,P,X,U)}return X[nt].exports}for(var at=typeof r=="function"&&r,tt=0;tt<U.length;tt++)V(U[tt]);return V}({1:[function(S,P,X){(function(U){(function(V){typeof X=="object"&&P!==void 0?P.exports=V():(typeof window!="undefined"?window:U!==void 0?U:typeof self!="undefined"?self:this).JSZip=V()})(function(){return function V(at,tt,nt){function ft(pt,mt){if(!tt[pt]){if(!at[pt]){var _t=typeof S=="function"&&S;if(!mt&&_t)return _t(pt,!0);if(yt)return yt(pt,!0);var wt=new Error("Cannot find module '"+pt+"'");throw wt.code="MODULE_NOT_FOUND",wt}var ht=tt[pt]={exports:{}};at[pt][0].call(ht.exports,function(v){return ft(at[pt][1][v]||v)},ht,ht.exports,V,at,tt,nt)}return tt[pt].exports}for(var yt=typeof S=="function"&&S,bt=0;bt<nt.length;bt++)ft(nt[bt]);return ft}({1:[function(V,at,tt){(function(nt){(function(ft){typeof tt=="object"&&at!==void 0?at.exports=ft():(typeof window!="undefined"?window:nt!==void 0?nt:typeof self!="undefined"?self:this).JSZip=ft()})(function(){return function ft(yt,bt,pt){function mt(ht,v){if(!bt[ht]){if(!yt[ht]){var j=typeof V=="function"&&V;if(!v&&j)return j(ht,!0);if(_t)return _t(ht,!0);var x=new Error("Cannot find module '"+ht+"'");throw x.code="MODULE_NOT_FOUND",x}var c=bt[ht]={exports:{}};yt[ht][0].call(c.exports,function(d){return mt(yt[ht][1][d]||d)},c,c.exports,ft,yt,bt,pt)}return bt[ht].exports}for(var _t=typeof V=="function"&&V,wt=0;wt<pt.length;wt++)mt(pt[wt]);return mt}({1:[function(ft,yt,bt){(function(pt){(function(mt){typeof bt=="object"&&yt!==void 0?yt.exports=mt():(typeof window!="undefined"?window:pt!==void 0?pt:typeof self!="undefined"?self:this).JSZip=mt()})(function(){return function mt(_t,wt,ht){function v(c,d){if(!wt[c]){if(!_t[c]){var n=typeof ft=="function"&&ft;if(!d&&n)return n(c,!0);if(j)return j(c,!0);var i=new Error("Cannot find module '"+c+"'");throw i.code="MODULE_NOT_FOUND",i}var p=wt[c]={exports:{}};_t[c][0].call(p.exports,function(k){return v(_t[c][1][k]||k)},p,p.exports,mt,_t,wt,ht)}return wt[c].exports}for(var j=typeof ft=="function"&&ft,x=0;x<ht.length;x++)v(ht[x]);return v}({1:[function(mt,_t,wt){(function(ht){(function(v){typeof wt=="object"&&_t!==void 0?_t.exports=v():(typeof window!="undefined"?window:ht!==void 0?ht:typeof self!="undefined"?self:this).JSZip=v()})(function(){return function v(j,x,c){function d(p,k){if(!x[p]){if(!j[p]){var _=typeof mt=="function"&&mt;if(!k&&_)return _(p,!0);if(n)return n(p,!0);var b=new Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b}var s=x[p]={exports:{}};j[p][0].call(s.exports,function(m){return d(j[p][1][m]||m)},s,s.exports,v,j,x,c)}return x[p].exports}for(var n=typeof mt=="function"&&mt,i=0;i<c.length;i++)d(c[i]);return d}({1:[function(v,j,x){"use strict";var c=v("./utils"),d=v("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(i){for(var p,k,_,b,s,m,y,a=[],l=0,h=i.length,I=h,O=c.getTypeOf(i)!=="string";l<i.length;)I=h-l,_=O?(p=i[l++],k=l<h?i[l++]:0,l<h?i[l++]:0):(p=i.charCodeAt(l++),k=l<h?i.charCodeAt(l++):0,l<h?i.charCodeAt(l++):0),b=p>>2,s=(3&p)<<4|k>>4,m=1<I?(15&k)<<2|_>>6:64,y=2<I?63&_:64,a.push(n.charAt(b)+n.charAt(s)+n.charAt(m)+n.charAt(y));return a.join("")},x.decode=function(i){var p,k,_,b,s,m,y=0,a=0;if(i.substr(0,"data:".length)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var l,h=3*(i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(i.charAt(i.length-1)===n.charAt(64)&&h--,i.charAt(i.length-2)===n.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=d.uint8array?new Uint8Array(0|h):new Array(0|h);y<i.length;)p=n.indexOf(i.charAt(y++))<<2|(b=n.indexOf(i.charAt(y++)))>>4,k=(15&b)<<4|(s=n.indexOf(i.charAt(y++)))>>2,_=(3&s)<<6|(m=n.indexOf(i.charAt(y++))),l[a++]=p,s!==64&&(l[a++]=k),m!==64&&(l[a++]=_);return l}},{"./support":30,"./utils":32}],2:[function(v,j,x){"use strict";var c=v("./external"),d=v("./stream/DataWorker"),n=v("./stream/Crc32Probe"),i=v("./stream/DataLengthProbe");function p(k,_,b,s,m){this.compressedSize=k,this.uncompressedSize=_,this.crc32=b,this.compression=s,this.compressedContent=m}p.prototype={getContentWorker:function(){var k=new d(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new i("data_length")),_=this;return k.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new d(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(k,_,b){return k.pipe(new n).pipe(new i("uncompressedSize")).pipe(_.compressWorker(b)).pipe(new i("compressedSize")).withStreamInfo("compression",_)},j.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(v,j,x){"use strict";var c=v("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(d){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},x.DEFLATE=v("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(v,j,x){"use strict";var c=v("./utils"),d=function(){for(var n,i=[],p=0;p<256;p++){n=p;for(var k=0;k<8;k++)n=1&n?3988292384^n>>>1:n>>>1;i[p]=n}return i}();j.exports=function(n,i){return n!==void 0&&n.length?c.getTypeOf(n)!=="string"?function(p,k,_){var b=d,s=0+_;p^=-1;for(var m=0;m<s;m++)p=p>>>8^b[255&(p^k[m])];return-1^p}(0|i,n,n.length):function(p,k,_){var b=d,s=0+_;p^=-1;for(var m=0;m<s;m++)p=p>>>8^b[255&(p^k.charCodeAt(m))];return-1^p}(0|i,n,n.length):0}},{"./utils":32}],5:[function(v,j,x){"use strict";x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(v,j,x){"use strict";var c;c=typeof Promise!="undefined"?Promise:v("lie"),j.exports={Promise:c}},{lie:37}],7:[function(v,j,x){"use strict";var c=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",d=v("pako"),n=v("./utils"),i=v("./stream/GenericWorker"),p=c?"uint8array":"array";function k(_,b){i.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=b,this.meta={}}x.magic="\b\0",n.inherits(k,i),k.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(p,_.data),!1)},k.prototype.flush=function(){i.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(b){_.push({data:b,meta:_.meta})}},x.compressWorker=function(_){return new k("Deflate",_)},x.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(v,j,x){"use strict";function c(s,m){var y,a="";for(y=0;y<m;y++)a+=String.fromCharCode(255&s),s>>>=8;return a}function d(s,m,y,a,l,h){var I,O,T=s.file,H=s.compression,M=h!==p.utf8encode,J=n.transformTo("string",h(T.name)),L=n.transformTo("string",p.utf8encode(T.name)),Q=T.comment,ct=n.transformTo("string",h(Q)),w=n.transformTo("string",p.utf8encode(Q)),N=L.length!==T.name.length,e=w.length!==Q.length,R="",ot="",Y="",lt=T.dir,G=T.date,it={crc32:0,compressedSize:0,uncompressedSize:0};m&&!y||(it.crc32=s.crc32,it.compressedSize=s.compressedSize,it.uncompressedSize=s.uncompressedSize);var D=0;m&&(D|=8),M||!N&&!e||(D|=2048);var B,kt=0,f=0;lt&&(kt|=16),l==="UNIX"?(f=798,kt|=((B=T.unixPermissions)||(B=lt?16893:33204),(65535&B)<<16)):(f=20,kt|=63&(T.dosPermissions||0)),I=G.getUTCHours(),I<<=6,I|=G.getUTCMinutes(),I<<=5,I|=G.getUTCSeconds()/2,O=G.getUTCFullYear()-1980,O<<=4,O|=G.getUTCMonth()+1,O<<=5,O|=G.getUTCDate(),N&&(R+="up"+c((ot=c(1,1)+c(k(J),4)+L).length,2)+ot),e&&(R+="uc"+c((Y=c(1,1)+c(k(ct),4)+w).length,2)+Y);var E="";return E+=`
\0`,E+=c(D,2),E+=H.magic,E+=c(I,2),E+=c(O,2),E+=c(it.crc32,4),E+=c(it.compressedSize,4),E+=c(it.uncompressedSize,4),E+=c(J.length,2),E+=c(R.length,2),{fileRecord:_.LOCAL_FILE_HEADER+E+J+R,dirRecord:_.CENTRAL_FILE_HEADER+c(f,2)+E+c(ct.length,2)+"\0\0\0\0"+c(kt,4)+c(a,4)+J+R+ct}}var n=v("../utils"),i=v("../stream/GenericWorker"),p=v("../utf8"),k=v("../crc32"),_=v("../signature");function b(s,m,y,a){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=y,this.encodeFileName=a,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(b,i),b.prototype.push=function(s){var m=s.meta.percent||0,y=this.entriesCount,a=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,i.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:y?(m+100*(y-a-1))/y:100}}))},b.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var m=this.streamFiles&&!s.file.dir;if(m){var y=d(s,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(s){this.accumulate=!1;var m,y=this.streamFiles&&!s.file.dir,a=d(s,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),y)this.push({data:(m=s,_.DATA_DESCRIPTOR+c(m.crc32,4)+c(m.compressedSize,4)+c(m.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var s=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var y,a,l,h,I,O,T=this.bytesWritten-s,H=(y=this.dirRecords.length,a=T,l=s,h=this.zipComment,I=this.encodeFileName,O=n.transformTo("string",I(h)),_.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(y,2)+c(y,2)+c(a,4)+c(l,4)+c(O.length,2)+O);this.push({data:H,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(s){this._sources.push(s);var m=this;return s.on("data",function(y){m.processChunk(y)}),s.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),s.on("error",function(y){m.error(y)}),this},b.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(s){var m=this._sources;if(!i.prototype.error.call(this,s))return!1;for(var y=0;y<m.length;y++)try{m[y].error(s)}catch(a){}return!0},b.prototype.lock=function(){i.prototype.lock.call(this);for(var s=this._sources,m=0;m<s.length;m++)s[m].lock()},j.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(v,j,x){"use strict";var c=v("../compressions"),d=v("./ZipFileWorker");x.generateWorker=function(n,i,p){var k=new d(i.streamFiles,p,i.platform,i.encodeFileName),_=0;try{n.forEach(function(b,s){_++;var m=function(h,I){var O=h||I,T=c[O];if(!T)throw new Error(O+" is not a valid compression method !");return T}(s.options.compression,i.compression),y=s.options.compressionOptions||i.compressionOptions||{},a=s.dir,l=s.date;s._compressWorker(m,y).withStreamInfo("file",{name:b,dir:a,date:l,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(k)}),k.entriesCount=_}catch(b){k.error(b)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(v,j,x){"use strict";function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var d=new c;for(var n in this)typeof this[n]!="function"&&(d[n]=this[n]);return d}}(c.prototype=v("./object")).loadAsync=v("./load"),c.support=v("./support"),c.defaults=v("./defaults"),c.version="3.5.0",c.loadAsync=function(d,n){return new c().loadAsync(d,n)},c.external=v("./external"),j.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(v,j,x){"use strict";var c=v("./utils"),d=v("./external"),n=v("./utf8"),i=v("./zipEntries"),p=v("./stream/Crc32Probe"),k=v("./nodejsUtils");function _(b){return new d.Promise(function(s,m){var y=b.decompressed.getContentWorker().pipe(new p);y.on("error",function(a){m(a)}).on("end",function(){y.streamInfo.crc32!==b.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}j.exports=function(b,s){var m=this;return s=c.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),k.isNode&&k.isStream(b)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",b,!0,s.optimizedBinaryString,s.base64).then(function(y){var a=new i(s);return a.load(y),a}).then(function(y){var a=[d.Promise.resolve(y)],l=y.files;if(s.checkCRC32)for(var h=0;h<l.length;h++)a.push(_(l[h]));return d.Promise.all(a)}).then(function(y){for(var a=y.shift(),l=a.files,h=0;h<l.length;h++){var I=l[h];m.file(I.fileNameStr,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:s.createFolders})}return a.zipComment.length&&(m.comment=a.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(v,j,x){"use strict";var c=v("../utils"),d=v("../stream/GenericWorker");function n(i,p){d.call(this,"Nodejs stream input adapter for "+i),this._upstreamEnded=!1,this._bindStream(p)}c.inherits(n,d),n.prototype._bindStream=function(i){var p=this;(this._stream=i).pause(),i.on("data",function(k){p.push({data:k,meta:{percent:0}})}).on("error",function(k){p.isPaused?this.generatedError=k:p.error(k)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},n.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},j.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(v,j,x){"use strict";var c=v("readable-stream").Readable;function d(n,i,p){c.call(this,i),this._helper=n;var k=this;n.on("data",function(_,b){k.push(_)||k._helper.pause(),p&&p(b)}).on("error",function(_){k.emit("error",_)}).on("end",function(){k.push(null)})}v("../utils").inherits(d,c),d.prototype._read=function(){this._helper.resume()},j.exports=d},{"../utils":32,"readable-stream":16}],14:[function(v,j,x){"use strict";j.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(c,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,d);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,d)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var d=new Buffer(c);return d.fill(0),d},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(v,j,x){"use strict";function c(O,T,H){var M,J=i.getTypeOf(T),L=i.extend(H||{},_);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(O=d(O)),L.createFolders&&(M=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var e=N.lastIndexOf("/");return 0<e?N.substring(0,e):""}(O))&&l.call(this,M,!0);var Q,ct=J==="string"&&L.binary===!1&&L.base64===!1;H&&H.binary!==void 0||(L.binary=!ct),(T instanceof b&&T.uncompressedSize===0||L.dir||!T||T.length===0)&&(L.base64=!1,L.binary=!0,T="",L.compression="STORE",J="string"),Q=T instanceof b||T instanceof p?T:y.isNode&&y.isStream(T)?new a(O,T):i.prepareContent(O,T,L.binary,L.optimizedBinaryString,L.base64);var w=new s(O,Q,L);this.files[O]=w}function d(O){return O.slice(-1)!=="/"&&(O+="/"),O}var n=v("./utf8"),i=v("./utils"),p=v("./stream/GenericWorker"),k=v("./stream/StreamHelper"),_=v("./defaults"),b=v("./compressedObject"),s=v("./zipObject"),m=v("./generate"),y=v("./nodejsUtils"),a=v("./nodejs/NodejsStreamInputAdapter"),l=function(O,T){return T=T!==void 0?T:_.createFolders,O=d(O),this.files[O]||c.call(this,O,null,{dir:!0,createFolders:T}),this.files[O]};function h(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var T,H,M;for(T in this.files)this.files.hasOwnProperty(T)&&(M=this.files[T],(H=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&O(H,M))},filter:function(O){var T=[];return this.forEach(function(H,M){O(H,M)&&T.push(M)}),T},file:function(O,T,H){if(arguments.length!==1)return O=this.root+O,c.call(this,O,T,H),this;if(h(O)){var M=O;return this.filter(function(L,Q){return!Q.dir&&M.test(L)})}var J=this.files[this.root+O];return J&&!J.dir?J:null},folder:function(O){if(!O)return this;if(h(O))return this.filter(function(J,L){return L.dir&&O.test(J)});var T=this.root+O,H=l.call(this,T),M=this.clone();return M.root=H.name,M},remove:function(O){O=this.root+O;var T=this.files[O];if(T||(O.slice(-1)!=="/"&&(O+="/"),T=this.files[O]),T&&!T.dir)delete this.files[O];else for(var H=this.filter(function(J,L){return L.name.slice(0,O.length)===O}),M=0;M<H.length;M++)delete this.files[H[M].name];return this},generate:function(O){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var T,H={};try{if((H=i.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=H.type.toLowerCase(),H.compression=H.compression.toUpperCase(),H.type==="binarystring"&&(H.type="string"),!H.type)throw new Error("No output type specified.");i.checkSupport(H.type),H.platform!=="darwin"&&H.platform!=="freebsd"&&H.platform!=="linux"&&H.platform!=="sunos"||(H.platform="UNIX"),H.platform==="win32"&&(H.platform="DOS");var M=H.comment||this.comment||"";T=m.generateWorker(this,H,M)}catch(J){(T=new p("error")).error(J)}return new k(T,H.type||"string",H.mimeType)},generateAsync:function(O,T){return this.generateInternalStream(O).accumulate(T)},generateNodeStream:function(O,T){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(T)}};j.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(v,j,x){j.exports=v("stream")},{stream:void 0}],17:[function(v,j,x){"use strict";var c=v("./DataReader");function d(n){c.call(this,n);for(var i=0;i<this.data.length;i++)n[i]=255&n[i]}v("../utils").inherits(d,c),d.prototype.byteAt=function(n){return this.data[this.zero+n]},d.prototype.lastIndexOfSignature=function(n){for(var i=n.charCodeAt(0),p=n.charCodeAt(1),k=n.charCodeAt(2),_=n.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===i&&this.data[b+1]===p&&this.data[b+2]===k&&this.data[b+3]===_)return b-this.zero;return-1},d.prototype.readAndCheckSignature=function(n){var i=n.charCodeAt(0),p=n.charCodeAt(1),k=n.charCodeAt(2),_=n.charCodeAt(3),b=this.readData(4);return i===b[0]&&p===b[1]&&k===b[2]&&_===b[3]},d.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var i=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,i},j.exports=d},{"../utils":32,"./DataReader":18}],18:[function(v,j,x){"use strict";var c=v("../utils");function d(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(n){},readInt:function(n){var i,p=0;for(this.checkOffset(n),i=this.index+n-1;i>=this.index;i--)p=(p<<8)+this.byteAt(i);return this.index+=n,p},readString:function(n){return c.transformTo("string",this.readData(n))},readData:function(n){},lastIndexOfSignature:function(n){},readAndCheckSignature:function(n){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},j.exports=d},{"../utils":32}],19:[function(v,j,x){"use strict";var c=v("./Uint8ArrayReader");function d(n){c.call(this,n)}v("../utils").inherits(d,c),d.prototype.readData=function(n){this.checkOffset(n);var i=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,i},j.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(v,j,x){"use strict";var c=v("./DataReader");function d(n){c.call(this,n)}v("../utils").inherits(d,c),d.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},d.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},d.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},d.prototype.readData=function(n){this.checkOffset(n);var i=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,i},j.exports=d},{"../utils":32,"./DataReader":18}],21:[function(v,j,x){"use strict";var c=v("./ArrayReader");function d(n){c.call(this,n)}v("../utils").inherits(d,c),d.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var i=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,i},j.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(v,j,x){"use strict";var c=v("../utils"),d=v("../support"),n=v("./ArrayReader"),i=v("./StringReader"),p=v("./NodeBufferReader"),k=v("./Uint8ArrayReader");j.exports=function(_){var b=c.getTypeOf(_);return c.checkSupport(b),b!=="string"||d.uint8array?b==="nodebuffer"?new p(_):d.uint8array?new k(c.transformTo("uint8array",_)):new n(c.transformTo("array",_)):new i(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(v,j,x){"use strict";x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(v,j,x){"use strict";var c=v("./GenericWorker"),d=v("../utils");function n(i){c.call(this,"ConvertWorker to "+i),this.destType=i}d.inherits(n,c),n.prototype.processChunk=function(i){this.push({data:d.transformTo(this.destType,i.data),meta:i.meta})},j.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(v,j,x){"use strict";var c=v("./GenericWorker"),d=v("../crc32");function n(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}v("../utils").inherits(n,c),n.prototype.processChunk=function(i){this.streamInfo.crc32=d(i.data,this.streamInfo.crc32||0),this.push(i)},j.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(v,j,x){"use strict";var c=v("../utils"),d=v("./GenericWorker");function n(i){d.call(this,"DataLengthProbe for "+i),this.propName=i,this.withStreamInfo(i,0)}c.inherits(n,d),n.prototype.processChunk=function(i){if(i){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+i.data.length}d.prototype.processChunk.call(this,i)},j.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(v,j,x){"use strict";var c=v("../utils"),d=v("./GenericWorker");function n(i){d.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,i.then(function(k){p.dataIsReady=!0,p.data=k,p.max=k&&k.length||0,p.type=c.getTypeOf(k),p.isPaused||p._tickAndRepeat()},function(k){p.error(k)})}c.inherits(n,d),n.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var i=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":i=this.data.substring(this.index,p);break;case"uint8array":i=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":i=this.data.slice(this.index,p)}return this.index=p,this.push({data:i,meta:{percent:this.max?this.index/this.max*100:0}})},j.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(v,j,x){"use strict";function c(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,n){return this._listeners[d].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,n){if(this._listeners[d])for(var i=0;i<this._listeners[d].length;i++)this._listeners[d][i].call(this,n)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var n=this;return d.on("data",function(i){n.processChunk(i)}),d.on("end",function(){n.end()}),d.on("error",function(i){n.error(i)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,n){return this.extraStreamInfo[d]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},j.exports=c},{}],29:[function(v,j,x){"use strict";var c=v("../utils"),d=v("./ConvertWorker"),n=v("./GenericWorker"),i=v("../base64"),p=v("../support"),k=v("../external"),_=null;if(p.nodestream)try{_=v("../nodejs/NodejsStreamOutputAdapter")}catch(s){}function b(s,m,y){var a=m;switch(m){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=m,this._mimeType=y,c.checkSupport(a),this._worker=s.pipe(new d(a)),s.lock()}catch(l){this._worker=new n("error"),this._worker.error(l)}}b.prototype={accumulate:function(s){return m=this,y=s,new k.Promise(function(a,l){var h=[],I=m._internalType,O=m._outputType,T=m._mimeType;m.on("data",function(H,M){h.push(H),y&&y(M)}).on("error",function(H){h=[],l(H)}).on("end",function(){try{var H=function(M,J,L){switch(M){case"blob":return c.newBlob(c.transformTo("arraybuffer",J),L);case"base64":return i.encode(J);default:return c.transformTo(M,J)}}(O,function(M,J){var L,Q=0,ct=null,w=0;for(L=0;L<J.length;L++)w+=J[L].length;switch(M){case"string":return J.join("");case"array":return Array.prototype.concat.apply([],J);case"uint8array":for(ct=new Uint8Array(w),L=0;L<J.length;L++)ct.set(J[L],Q),Q+=J[L].length;return ct;case"nodebuffer":return Buffer.concat(J);default:throw new Error("concat : unsupported type '"+M+"'")}}(I,h),T);a(H)}catch(M){l(M)}h=[]}).resume()});var m,y},on:function(s,m){var y=this;return s==="data"?this._worker.on(s,function(a){m.call(y,a.data,a.meta)}):this._worker.on(s,function(){c.delay(m,arguments,y)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(s){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},s)}},j.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(v,j,x){"use strict";if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",x.nodebuffer=typeof Buffer!="undefined",x.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")x.blob=!1;else{var c=new ArrayBuffer(0);try{x.blob=new Blob([c],{type:"application/zip"}).size===0}catch(n){try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(c),x.blob=d.getBlob("application/zip").size===0}catch(i){x.blob=!1}}}try{x.nodestream=!!v("readable-stream").Readable}catch(n){x.nodestream=!1}},{"readable-stream":16}],31:[function(v,j,x){"use strict";for(var c=v("./utils"),d=v("./support"),n=v("./nodejsUtils"),i=v("./stream/GenericWorker"),p=new Array(256),k=0;k<256;k++)p[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;function _(){i.call(this,"utf-8 decode"),this.leftOver=null}function b(){i.call(this,"utf-8 encode")}p[254]=p[254]=1,x.utf8encode=function(s){return d.nodebuffer?n.newBufferFrom(s,"utf-8"):function(m){var y,a,l,h,I,O=m.length,T=0;for(h=0;h<O;h++)(64512&(a=m.charCodeAt(h)))==55296&&h+1<O&&(64512&(l=m.charCodeAt(h+1)))==56320&&(a=65536+(a-55296<<10)+(l-56320),h++),T+=a<128?1:a<2048?2:a<65536?3:4;for(y=d.uint8array?new Uint8Array(T):new Array(T),h=I=0;I<T;h++)(64512&(a=m.charCodeAt(h)))==55296&&h+1<O&&(64512&(l=m.charCodeAt(h+1)))==56320&&(a=65536+(a-55296<<10)+(l-56320),h++),a<128?y[I++]=a:(a<2048?y[I++]=192|a>>>6:(a<65536?y[I++]=224|a>>>12:(y[I++]=240|a>>>18,y[I++]=128|a>>>12&63),y[I++]=128|a>>>6&63),y[I++]=128|63&a);return y}(s)},x.utf8decode=function(s){return d.nodebuffer?c.transformTo("nodebuffer",s).toString("utf-8"):function(m){var y,a,l,h,I=m.length,O=new Array(2*I);for(y=a=0;y<I;)if((l=m[y++])<128)O[a++]=l;else if(4<(h=p[l]))O[a++]=65533,y+=h-1;else{for(l&=h===2?31:h===3?15:7;1<h&&y<I;)l=l<<6|63&m[y++],h--;1<h?O[a++]=65533:l<65536?O[a++]=l:(l-=65536,O[a++]=55296|l>>10&1023,O[a++]=56320|1023&l)}return O.length!==a&&(O.subarray?O=O.subarray(0,a):O.length=a),c.applyFromCharCode(O)}(s=c.transformTo(d.uint8array?"uint8array":"array",s))},c.inherits(_,i),_.prototype.processChunk=function(s){var m=c.transformTo(d.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var y=m;(m=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),m.set(y,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var a=function(h,I){var O;for((I=I||h.length)>h.length&&(I=h.length),O=I-1;0<=O&&(192&h[O])==128;)O--;return O<0||O===0?I:O+p[h[O]]>I?O:I}(m),l=m;a!==m.length&&(d.uint8array?(l=m.subarray(0,a),this.leftOver=m.subarray(a,m.length)):(l=m.slice(0,a),this.leftOver=m.slice(a,m.length))),this.push({data:x.utf8decode(l),meta:s.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=_,c.inherits(b,i),b.prototype.processChunk=function(s){this.push({data:x.utf8encode(s.data),meta:s.meta})},x.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(v,j,x){"use strict";var c=v("./support"),d=v("./base64"),n=v("./nodejsUtils"),i=v("set-immediate-shim"),p=v("./external");function k(a){return a}function _(a,l){for(var h=0;h<a.length;++h)l[h]=255&a.charCodeAt(h);return l}x.newBlob=function(a,l){x.checkSupport("blob");try{return new Blob([a],{type:l})}catch(I){try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(a),h.getBlob(l)}catch(O){throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(a,l,h){var I=[],O=0,T=a.length;if(T<=h)return String.fromCharCode.apply(null,a);for(;O<T;)l==="array"||l==="nodebuffer"?I.push(String.fromCharCode.apply(null,a.slice(O,Math.min(O+h,T)))):I.push(String.fromCharCode.apply(null,a.subarray(O,Math.min(O+h,T)))),O+=h;return I.join("")},stringifyByChar:function(a){for(var l="",h=0;h<a.length;h++)l+=String.fromCharCode(a[h]);return l},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(a){return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch(a){return!1}}()}};function s(a){var l=65536,h=x.getTypeOf(a),I=!0;if(h==="uint8array"?I=b.applyCanBeUsed.uint8array:h==="nodebuffer"&&(I=b.applyCanBeUsed.nodebuffer),I)for(;1<l;)try{return b.stringifyByChunk(a,h,l)}catch(O){l=Math.floor(l/2)}return b.stringifyByChar(a)}function m(a,l){for(var h=0;h<a.length;h++)l[h]=a[h];return l}x.applyFromCharCode=s;var y={};y.string={string:k,array:function(a){return _(a,new Array(a.length))},arraybuffer:function(a){return y.string.uint8array(a).buffer},uint8array:function(a){return _(a,new Uint8Array(a.length))},nodebuffer:function(a){return _(a,n.allocBuffer(a.length))}},y.array={string:s,array:k,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(a)}},y.arraybuffer={string:function(a){return s(new Uint8Array(a))},array:function(a){return m(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:k,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(new Uint8Array(a))}},y.uint8array={string:s,array:function(a){return m(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:k,nodebuffer:function(a){return n.newBufferFrom(a)}},y.nodebuffer={string:s,array:function(a){return m(a,new Array(a.length))},arraybuffer:function(a){return y.nodebuffer.uint8array(a).buffer},uint8array:function(a){return m(a,new Uint8Array(a.length))},nodebuffer:k},x.transformTo=function(a,l){if(l=l||"",!a)return l;x.checkSupport(a);var h=x.getTypeOf(l);return y[h][a](l)},x.getTypeOf=function(a){return typeof a=="string"?"string":Object.prototype.toString.call(a)==="[object Array]"?"array":c.nodebuffer&&n.isBuffer(a)?"nodebuffer":c.uint8array&&a instanceof Uint8Array?"uint8array":c.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(a){if(!c[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(a){var l,h,I="";for(h=0;h<(a||"").length;h++)I+="\\x"+((l=a.charCodeAt(h))<16?"0":"")+l.toString(16).toUpperCase();return I},x.delay=function(a,l,h){i(function(){a.apply(h||null,l||[])})},x.inherits=function(a,l){function h(){}h.prototype=l.prototype,a.prototype=new h},x.extend=function(){var a,l,h={};for(a=0;a<arguments.length;a++)for(l in arguments[a])arguments[a].hasOwnProperty(l)&&h[l]===void 0&&(h[l]=arguments[a][l]);return h},x.prepareContent=function(a,l,h,I,O){return p.Promise.resolve(l).then(function(T){return c.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader!="undefined"?new p.Promise(function(H,M){var J=new FileReader;J.onload=function(L){H(L.target.result)},J.onerror=function(L){M(L.target.error)},J.readAsArrayBuffer(T)}):T}).then(function(T){var H,M=x.getTypeOf(T);return M?(M==="arraybuffer"?T=x.transformTo("uint8array",T):M==="string"&&(O?T=d.decode(T):h&&I!==!0&&(T=_(H=T,c.uint8array?new Uint8Array(H.length):new Array(H.length)))),T):p.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(v,j,x){"use strict";var c=v("./reader/readerFor"),d=v("./utils"),n=v("./signature"),i=v("./zipEntry"),p=(v("./utf8"),v("./support"));function k(_){this.files=[],this.loadOptions=_}k.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(b)+", expected "+d.pretty(_)+")")}},isSignature:function(_,b){var s=this.reader.index;this.reader.setIndex(_);var m=this.reader.readString(4)===b;return this.reader.setIndex(s),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),b=p.uint8array?"uint8array":"array",s=d.transformTo(b,_);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,b,s,m=this.zip64EndOfCentralSize-44;0<m;)_=this.reader.readInt(2),b=this.reader.readInt(4),s=this.reader.readData(b),this.zip64ExtensibleData[_]={id:_,length:b,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,b;for(_=0;_<this.files.length;_++)b=this.files[_],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(_=new i({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var b=_;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var m=b-s;if(0<m)this.isSignature(b,n.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(_){this.reader=c(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},j.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(v,j,x){"use strict";var c=v("./reader/readerFor"),d=v("./utils"),n=v("./compressedObject"),i=v("./crc32"),p=v("./utf8"),k=v("./compressions"),_=v("./support");function b(s,m){this.options=s,this.loadOptions=m}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var m,y;if(s.skip(22),this.fileNameLength=s.readInt(2),y=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(a){for(var l in k)if(k.hasOwnProperty(l)&&k[l].magic===a)return k[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,m,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var m=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(m),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(s){if(this.extraFields[1]){var m=c(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(s){var m,y,a,l=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<l;)m=s.readInt(2),y=s.readInt(2),a=s.readData(y),this.extraFields[m]={id:m,length:y,value:a};s.setIndex(l)},handleUTF8:function(){var s=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var y=d.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var a=this.findExtraFieldUnicodeComment();if(a!==null)this.fileCommentStr=a;else{var l=d.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var m=c(s.value);return m.readInt(1)!==1||i(this.fileName)!==m.readInt(4)?null:p.utf8decode(m.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var m=c(s.value);return m.readInt(1)!==1||i(this.fileComment)!==m.readInt(4)?null:p.utf8decode(m.readData(s.length-5))}return null}},j.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(v,j,x){"use strict";function c(m,y,a){this.name=m,this.dir=a.dir,this.date=a.date,this.comment=a.comment,this.unixPermissions=a.unixPermissions,this.dosPermissions=a.dosPermissions,this._data=y,this._dataBinary=a.binary,this.options={compression:a.compression,compressionOptions:a.compressionOptions}}var d=v("./stream/StreamHelper"),n=v("./stream/DataWorker"),i=v("./utf8"),p=v("./compressedObject"),k=v("./stream/GenericWorker");c.prototype={internalStream:function(m){var y=null,a="string";try{if(!m)throw new Error("No output type specified.");var l=(a=m.toLowerCase())==="string"||a==="text";a!=="binarystring"&&a!=="text"||(a="string"),y=this._decompressWorker();var h=!this._dataBinary;h&&!l&&(y=y.pipe(new i.Utf8EncodeWorker)),!h&&l&&(y=y.pipe(new i.Utf8DecodeWorker))}catch(I){(y=new k("error")).error(I)}return new d(y,a,"")},async:function(m,y){return this.internalStream(m).accumulate(y)},nodeStream:function(m,y){return this.internalStream(m||"nodebuffer").toNodejsStream(y)},_compressWorker:function(m,y){if(this._data instanceof p&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var a=this._decompressWorker();return this._dataBinary||(a=a.pipe(new i.Utf8EncodeWorker)),p.createWorkerFrom(a,m,y)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof k?this._data:new n(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<_.length;s++)c.prototype[_[s]]=b;j.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(v,j,x){(function(c){"use strict";var d,n,i=c.MutationObserver||c.WebKitMutationObserver;if(i){var p=0,k=new i(m),_=c.document.createTextNode("");k.observe(_,{characterData:!0}),d=function(){_.data=p=++p%2}}else if(c.setImmediate||c.MessageChannel===void 0)d="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var y=c.document.createElement("script");y.onreadystatechange=function(){m(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},c.document.documentElement.appendChild(y)}:function(){setTimeout(m,0)};else{var b=new c.MessageChannel;b.port1.onmessage=m,d=function(){b.port2.postMessage(0)}}var s=[];function m(){var y,a;n=!0;for(var l=s.length;l;){for(a=s,s=[],y=-1;++y<l;)a[y]();l=s.length}n=!1}j.exports=function(y){s.push(y)!==1||n||d()}}).call(this,ht!==void 0?ht:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(v,j,x){"use strict";var c=v("immediate");function d(){}var n={},i=["REJECTED"],p=["FULFILLED"],k=["PENDING"];function _(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,l!==d&&y(this,l)}function b(l,h,I){this.promise=l,typeof h=="function"&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function s(l,h,I){c(function(){var O;try{O=h(I)}catch(T){return n.reject(l,T)}O===l?n.reject(l,new TypeError("Cannot resolve promise with itself")):n.resolve(l,O)})}function m(l){var h=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof h=="function")return function(){h.apply(l,arguments)}}function y(l,h){var I=!1;function O(M){I||(I=!0,n.reject(l,M))}function T(M){I||(I=!0,n.resolve(l,M))}var H=a(function(){h(T,O)});H.status==="error"&&O(H.value)}function a(l,h){var I={};try{I.value=l(h),I.status="success"}catch(O){I.status="error",I.value=O}return I}(j.exports=_).prototype.finally=function(l){if(typeof l!="function")return this;var h=this.constructor;return this.then(function(I){return h.resolve(l()).then(function(){return I})},function(I){return h.resolve(l()).then(function(){throw I})})},_.prototype.catch=function(l){return this.then(null,l)},_.prototype.then=function(l,h){if(typeof l!="function"&&this.state===p||typeof h!="function"&&this.state===i)return this;var I=new this.constructor(d);return this.state!==k?s(I,this.state===p?l:h,this.outcome):this.queue.push(new b(I,l,h)),I},b.prototype.callFulfilled=function(l){n.resolve(this.promise,l)},b.prototype.otherCallFulfilled=function(l){s(this.promise,this.onFulfilled,l)},b.prototype.callRejected=function(l){n.reject(this.promise,l)},b.prototype.otherCallRejected=function(l){s(this.promise,this.onRejected,l)},n.resolve=function(l,h){var I=a(m,h);if(I.status==="error")return n.reject(l,I.value);var O=I.value;if(O)y(l,O);else{l.state=p,l.outcome=h;for(var T=-1,H=l.queue.length;++T<H;)l.queue[T].callFulfilled(h)}return l},n.reject=function(l,h){l.state=i,l.outcome=h;for(var I=-1,O=l.queue.length;++I<O;)l.queue[I].callRejected(h);return l},_.resolve=function(l){return l instanceof this?l:n.resolve(new this(d),l)},_.reject=function(l){var h=new this(d);return n.reject(h,l)},_.all=function(l){var h=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=l.length,O=!1;if(!I)return this.resolve([]);for(var T=new Array(I),H=0,M=-1,J=new this(d);++M<I;)L(l[M],M);return J;function L(Q,ct){h.resolve(Q).then(function(w){T[ct]=w,++H!==I||O||(O=!0,n.resolve(J,T))},function(w){O||(O=!0,n.reject(J,w))})}},_.race=function(l){if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var h=l.length,I=!1;if(!h)return this.resolve([]);for(var O,T=-1,H=new this(d);++T<h;)O=l[T],this.resolve(O).then(function(M){I||(I=!0,n.resolve(H,M))},function(M){I||(I=!0,n.reject(H,M))});return H}},{immediate:36}],38:[function(v,j,x){"use strict";var c={};(0,v("./lib/utils/common").assign)(c,v("./lib/deflate"),v("./lib/inflate"),v("./lib/zlib/constants")),j.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(v,j,x){"use strict";var c=v("./zlib/deflate"),d=v("./utils/common"),n=v("./utils/strings"),i=v("./zlib/messages"),p=v("./zlib/zstream"),k=Object.prototype.toString,_=0,b=-1,s=0,m=8;function y(l){if(!(this instanceof y))return new y(l);this.options=d.assign({level:b,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},l||{});var h=this.options;h.raw&&0<h.windowBits?h.windowBits=-h.windowBits:h.gzip&&0<h.windowBits&&h.windowBits<16&&(h.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var I=c.deflateInit2(this.strm,h.level,h.method,h.windowBits,h.memLevel,h.strategy);if(I!==_)throw new Error(i[I]);if(h.header&&c.deflateSetHeader(this.strm,h.header),h.dictionary){var O;if(O=typeof h.dictionary=="string"?n.string2buf(h.dictionary):k.call(h.dictionary)==="[object ArrayBuffer]"?new Uint8Array(h.dictionary):h.dictionary,(I=c.deflateSetDictionary(this.strm,O))!==_)throw new Error(i[I]);this._dict_set=!0}}function a(l,h){var I=new y(h);if(I.push(l,!0),I.err)throw I.msg||i[I.err];return I.result}y.prototype.push=function(l,h){var I,O,T=this.strm,H=this.options.chunkSize;if(this.ended)return!1;O=h===~~h?h:h===!0?4:0,typeof l=="string"?T.input=n.string2buf(l):k.call(l)==="[object ArrayBuffer]"?T.input=new Uint8Array(l):T.input=l,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new d.Buf8(H),T.next_out=0,T.avail_out=H),(I=c.deflate(T,O))!==1&&I!==_)return this.onEnd(I),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(d.shrinkBuf(T.output,T.next_out))):this.onData(d.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&I!==1);return O===4?(I=c.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===_):O!==2||(this.onEnd(_),!(T.avail_out=0))},y.prototype.onData=function(l){this.chunks.push(l)},y.prototype.onEnd=function(l){l===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},x.Deflate=y,x.deflate=a,x.deflateRaw=function(l,h){return(h=h||{}).raw=!0,a(l,h)},x.gzip=function(l,h){return(h=h||{}).gzip=!0,a(l,h)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(v,j,x){"use strict";var c=v("./zlib/inflate"),d=v("./utils/common"),n=v("./utils/strings"),i=v("./zlib/constants"),p=v("./zlib/messages"),k=v("./zlib/zstream"),_=v("./zlib/gzheader"),b=Object.prototype.toString;function s(y){if(!(this instanceof s))return new s(y);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},y||{});var a=this.options;a.raw&&0<=a.windowBits&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),!(0<=a.windowBits&&a.windowBits<16)||y&&y.windowBits||(a.windowBits+=32),15<a.windowBits&&a.windowBits<48&&(15&a.windowBits)==0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var l=c.inflateInit2(this.strm,a.windowBits);if(l!==i.Z_OK)throw new Error(p[l]);this.header=new _,c.inflateGetHeader(this.strm,this.header)}function m(y,a){var l=new s(a);if(l.push(y,!0),l.err)throw l.msg||p[l.err];return l.result}s.prototype.push=function(y,a){var l,h,I,O,T,H,M=this.strm,J=this.options.chunkSize,L=this.options.dictionary,Q=!1;if(this.ended)return!1;h=a===~~a?a:a===!0?i.Z_FINISH:i.Z_NO_FLUSH,typeof y=="string"?M.input=n.binstring2buf(y):b.call(y)==="[object ArrayBuffer]"?M.input=new Uint8Array(y):M.input=y,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new d.Buf8(J),M.next_out=0,M.avail_out=J),(l=c.inflate(M,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&L&&(H=typeof L=="string"?n.string2buf(L):b.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,l=c.inflateSetDictionary(this.strm,H)),l===i.Z_BUF_ERROR&&Q===!0&&(l=i.Z_OK,Q=!1),l!==i.Z_STREAM_END&&l!==i.Z_OK)return this.onEnd(l),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&l!==i.Z_STREAM_END&&(M.avail_in!==0||h!==i.Z_FINISH&&h!==i.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=n.utf8border(M.output,M.next_out),O=M.next_out-I,T=n.buf2string(M.output,I),M.next_out=O,M.avail_out=J-O,O&&d.arraySet(M.output,M.output,I,O,0),this.onData(T)):this.onData(d.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(Q=!0)}while((0<M.avail_in||M.avail_out===0)&&l!==i.Z_STREAM_END);return l===i.Z_STREAM_END&&(h=i.Z_FINISH),h===i.Z_FINISH?(l=c.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===i.Z_OK):h!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),!(M.avail_out=0))},s.prototype.onData=function(y){this.chunks.push(y)},s.prototype.onEnd=function(y){y===i.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},x.Inflate=s,x.inflate=m,x.inflateRaw=function(y,a){return(a=a||{}).raw=!0,m(y,a)},x.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(v,j,x){"use strict";var c=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";x.assign=function(i){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var k=p.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var _ in k)k.hasOwnProperty(_)&&(i[_]=k[_])}}return i},x.shrinkBuf=function(i,p){return i.length===p?i:i.subarray?i.subarray(0,p):(i.length=p,i)};var d={arraySet:function(i,p,k,_,b){if(p.subarray&&i.subarray)i.set(p.subarray(k,k+_),b);else for(var s=0;s<_;s++)i[b+s]=p[k+s]},flattenChunks:function(i){var p,k,_,b,s,m;for(p=_=0,k=i.length;p<k;p++)_+=i[p].length;for(m=new Uint8Array(_),p=b=0,k=i.length;p<k;p++)s=i[p],m.set(s,b),b+=s.length;return m}},n={arraySet:function(i,p,k,_,b){for(var s=0;s<_;s++)i[b+s]=p[k+s]},flattenChunks:function(i){return[].concat.apply([],i)}};x.setTyped=function(i){i?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,d)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,n))},x.setTyped(c)},{}],42:[function(v,j,x){"use strict";var c=v("./common"),d=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch(_){d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_){n=!1}for(var i=new c.Buf8(256),p=0;p<256;p++)i[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function k(_,b){if(b<65537&&(_.subarray&&n||!_.subarray&&d))return String.fromCharCode.apply(null,c.shrinkBuf(_,b));for(var s="",m=0;m<b;m++)s+=String.fromCharCode(_[m]);return s}i[254]=i[254]=1,x.string2buf=function(_){var b,s,m,y,a,l=_.length,h=0;for(y=0;y<l;y++)(64512&(s=_.charCodeAt(y)))==55296&&y+1<l&&(64512&(m=_.charCodeAt(y+1)))==56320&&(s=65536+(s-55296<<10)+(m-56320),y++),h+=s<128?1:s<2048?2:s<65536?3:4;for(b=new c.Buf8(h),y=a=0;a<h;y++)(64512&(s=_.charCodeAt(y)))==55296&&y+1<l&&(64512&(m=_.charCodeAt(y+1)))==56320&&(s=65536+(s-55296<<10)+(m-56320),y++),s<128?b[a++]=s:(s<2048?b[a++]=192|s>>>6:(s<65536?b[a++]=224|s>>>12:(b[a++]=240|s>>>18,b[a++]=128|s>>>12&63),b[a++]=128|s>>>6&63),b[a++]=128|63&s);return b},x.buf2binstring=function(_){return k(_,_.length)},x.binstring2buf=function(_){for(var b=new c.Buf8(_.length),s=0,m=b.length;s<m;s++)b[s]=_.charCodeAt(s);return b},x.buf2string=function(_,b){var s,m,y,a,l=b||_.length,h=new Array(2*l);for(s=m=0;s<l;)if((y=_[s++])<128)h[m++]=y;else if(4<(a=i[y]))h[m++]=65533,s+=a-1;else{for(y&=a===2?31:a===3?15:7;1<a&&s<l;)y=y<<6|63&_[s++],a--;1<a?h[m++]=65533:y<65536?h[m++]=y:(y-=65536,h[m++]=55296|y>>10&1023,h[m++]=56320|1023&y)}return k(h,m)},x.utf8border=function(_,b){var s;for((b=b||_.length)>_.length&&(b=_.length),s=b-1;0<=s&&(192&_[s])==128;)s--;return s<0||s===0?b:s+i[_[s]]>b?s:b}},{"./common":41}],43:[function(v,j,x){"use strict";j.exports=function(c,d,n,i){for(var p=65535&c|0,k=c>>>16&65535|0,_=0;n!==0;){for(n-=_=2e3<n?2e3:n;k=k+(p=p+d[i++]|0)|0,--_;);p%=65521,k%=65521}return p|k<<16|0}},{}],44:[function(v,j,x){"use strict";j.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(v,j,x){"use strict";var c=function(){for(var d,n=[],i=0;i<256;i++){d=i;for(var p=0;p<8;p++)d=1&d?3988292384^d>>>1:d>>>1;n[i]=d}return n}();j.exports=function(d,n,i,p){var k=c,_=p+i;d^=-1;for(var b=p;b<_;b++)d=d>>>8^k[255&(d^n[b])];return-1^d}},{}],46:[function(v,j,x){"use strict";var c,d=v("../utils/common"),n=v("./trees"),i=v("./adler32"),p=v("./crc32"),k=v("./messages"),_=0,b=0,s=-2,m=2,y=8,a=286,l=30,h=19,I=2*a+1,O=15,T=3,H=258,M=H+T+1,J=42,L=113;function Q(t,z){return t.msg=k[z],z}function ct(t){return(t<<1)-(4<t?9:0)}function w(t){for(var z=t.length;0<=--z;)t[z]=0}function N(t){var z=t.state,g=z.pending;g>t.avail_out&&(g=t.avail_out),g!==0&&(d.arraySet(t.output,z.pending_buf,z.pending_out,g,t.next_out),t.next_out+=g,z.pending_out+=g,t.total_out+=g,t.avail_out-=g,z.pending-=g,z.pending===0&&(z.pending_out=0))}function e(t,z){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,z),t.block_start=t.strstart,N(t.strm)}function R(t,z){t.pending_buf[t.pending++]=z}function ot(t,z){t.pending_buf[t.pending++]=z>>>8&255,t.pending_buf[t.pending++]=255&z}function Y(t,z){var g,o,Z=t.max_chain_length,F=t.strstart,K=t.prev_length,q=t.nice_match,W=t.strstart>t.w_size-M?t.strstart-(t.w_size-M):0,$=t.window,st=t.w_mask,et=t.prev,ut=t.strstart+H,rt=$[F+K-1],vt=$[F+K];t.prev_length>=t.good_match&&(Z>>=2),q>t.lookahead&&(q=t.lookahead);do if($[(g=z)+K]===vt&&$[g+K-1]===rt&&$[g]===$[F]&&$[++g]===$[F+1]){F+=2,g++;do;while($[++F]===$[++g]&&$[++F]===$[++g]&&$[++F]===$[++g]&&$[++F]===$[++g]&&$[++F]===$[++g]&&$[++F]===$[++g]&&$[++F]===$[++g]&&$[++F]===$[++g]&&F<ut);if(o=H-(ut-F),F=ut-H,K<o){if(t.match_start=z,q<=(K=o))break;rt=$[F+K-1],vt=$[F+K]}}while((z=et[z&st])>W&&--Z!=0);return K<=t.lookahead?K:t.lookahead}function lt(t){var z,g,o,Z,F,K,q,W,$,st,et=t.w_size;do{if(Z=t.window_size-t.lookahead-t.strstart,t.strstart>=et+(et-M)){for(d.arraySet(t.window,t.window,et,et,0),t.match_start-=et,t.strstart-=et,t.block_start-=et,z=g=t.hash_size;o=t.head[--z],t.head[z]=et<=o?o-et:0,--g;);for(z=g=et;o=t.prev[--z],t.prev[z]=et<=o?o-et:0,--g;);Z+=et}if(t.strm.avail_in===0)break;if(K=t.strm,q=t.window,W=t.strstart+t.lookahead,st=void 0,($=Z)<(st=K.avail_in)&&(st=$),g=st===0?0:(K.avail_in-=st,d.arraySet(q,K.input,K.next_in,st,W),K.state.wrap===1?K.adler=i(K.adler,q,st,W):K.state.wrap===2&&(K.adler=p(K.adler,q,st,W)),K.next_in+=st,K.total_in+=st,st),t.lookahead+=g,t.lookahead+t.insert>=T)for(F=t.strstart-t.insert,t.ins_h=t.window[F],t.ins_h=(t.ins_h<<t.hash_shift^t.window[F+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[F+T-1])&t.hash_mask,t.prev[F&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=F,F++,t.insert--,!(t.lookahead+t.insert<T)););}while(t.lookahead<M&&t.strm.avail_in!==0)}function G(t,z){for(var g,o;;){if(t.lookahead<M){if(lt(t),t.lookahead<M&&z===_)return 1;if(t.lookahead===0)break}if(g=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,g=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),g!==0&&t.strstart-g<=t.w_size-M&&(t.match_length=Y(t,g)),t.match_length>=T)if(o=n._tr_tally(t,t.strstart-t.match_start,t.match_length-T),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=T){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,g=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else o=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(o&&(e(t,!1),t.strm.avail_out===0))return 1}return t.insert=t.strstart<T-1?t.strstart:T-1,z===4?(e(t,!0),t.strm.avail_out===0?3:4):t.last_lit&&(e(t,!1),t.strm.avail_out===0)?1:2}function it(t,z){for(var g,o,Z;;){if(t.lookahead<M){if(lt(t),t.lookahead<M&&z===_)return 1;if(t.lookahead===0)break}if(g=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,g=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=T-1,g!==0&&t.prev_length<t.max_lazy_match&&t.strstart-g<=t.w_size-M&&(t.match_length=Y(t,g),t.match_length<=5&&(t.strategy===1||t.match_length===T&&4096<t.strstart-t.match_start)&&(t.match_length=T-1)),t.prev_length>=T&&t.match_length<=t.prev_length){for(Z=t.strstart+t.lookahead-T,o=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-T),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=Z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,g=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=T-1,t.strstart++,o&&(e(t,!1),t.strm.avail_out===0))return 1}else if(t.match_available){if((o=n._tr_tally(t,0,t.window[t.strstart-1]))&&e(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(o=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<T-1?t.strstart:T-1,z===4?(e(t,!0),t.strm.avail_out===0?3:4):t.last_lit&&(e(t,!1),t.strm.avail_out===0)?1:2}function D(t,z,g,o,Z){this.good_length=t,this.max_lazy=z,this.nice_length=g,this.max_chain=o,this.func=Z}function B(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*I),this.dyn_dtree=new d.Buf16(2*(2*l+1)),this.bl_tree=new d.Buf16(2*(2*h+1)),w(this.dyn_ltree),w(this.dyn_dtree),w(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(O+1),this.heap=new d.Buf16(2*a+1),w(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*a+1),w(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function kt(t){var z;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=m,(z=t.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?J:L,t.adler=z.wrap===2?0:1,z.last_flush=_,n._tr_init(z),b):Q(t,s)}function f(t){var z,g=kt(t);return g===b&&((z=t.state).window_size=2*z.w_size,w(z.head),z.max_lazy_match=c[z.level].max_lazy,z.good_match=c[z.level].good_length,z.nice_match=c[z.level].nice_length,z.max_chain_length=c[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=T-1,z.match_available=0,z.ins_h=0),g}function E(t,z,g,o,Z,F){if(!t)return s;var K=1;if(z===-1&&(z=6),o<0?(K=0,o=-o):15<o&&(K=2,o-=16),Z<1||9<Z||g!==y||o<8||15<o||z<0||9<z||F<0||4<F)return Q(t,s);o===8&&(o=9);var q=new B;return(t.state=q).strm=t,q.wrap=K,q.gzhead=null,q.w_bits=o,q.w_size=1<<q.w_bits,q.w_mask=q.w_size-1,q.hash_bits=Z+7,q.hash_size=1<<q.hash_bits,q.hash_mask=q.hash_size-1,q.hash_shift=~~((q.hash_bits+T-1)/T),q.window=new d.Buf8(2*q.w_size),q.head=new d.Buf16(q.hash_size),q.prev=new d.Buf16(q.w_size),q.lit_bufsize=1<<Z+6,q.pending_buf_size=4*q.lit_bufsize,q.pending_buf=new d.Buf8(q.pending_buf_size),q.d_buf=1*q.lit_bufsize,q.l_buf=3*q.lit_bufsize,q.level=z,q.strategy=F,q.method=g,f(t)}c=[new D(0,0,0,0,function(t,z){var g=65535;for(g>t.pending_buf_size-5&&(g=t.pending_buf_size-5);;){if(t.lookahead<=1){if(lt(t),t.lookahead===0&&z===_)return 1;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var o=t.block_start+g;if((t.strstart===0||t.strstart>=o)&&(t.lookahead=t.strstart-o,t.strstart=o,e(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-M&&(e(t,!1),t.strm.avail_out===0))return 1}return t.insert=0,z===4?(e(t,!0),t.strm.avail_out===0?3:4):(t.strstart>t.block_start&&(e(t,!1),t.strm.avail_out),1)}),new D(4,4,8,4,G),new D(4,5,16,8,G),new D(4,6,32,32,G),new D(4,4,16,16,it),new D(8,16,32,32,it),new D(8,16,128,128,it),new D(8,32,128,256,it),new D(32,128,258,1024,it),new D(32,258,258,4096,it)],x.deflateInit=function(t,z){return E(t,z,y,15,8,0)},x.deflateInit2=E,x.deflateReset=f,x.deflateResetKeep=kt,x.deflateSetHeader=function(t,z){return t&&t.state?t.state.wrap!==2?s:(t.state.gzhead=z,b):s},x.deflate=function(t,z){var g,o,Z,F;if(!t||!t.state||5<z||z<0)return t?Q(t,s):s;if(o=t.state,!t.output||!t.input&&t.avail_in!==0||o.status===666&&z!==4)return Q(t,t.avail_out===0?-5:s);if(o.strm=t,g=o.last_flush,o.last_flush=z,o.status===J)if(o.wrap===2)t.adler=0,R(o,31),R(o,139),R(o,8),o.gzhead?(R(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),R(o,255&o.gzhead.time),R(o,o.gzhead.time>>8&255),R(o,o.gzhead.time>>16&255),R(o,o.gzhead.time>>24&255),R(o,o.level===9?2:2<=o.strategy||o.level<2?4:0),R(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(R(o,255&o.gzhead.extra.length),R(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=p(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(R(o,0),R(o,0),R(o,0),R(o,0),R(o,0),R(o,o.level===9?2:2<=o.strategy||o.level<2?4:0),R(o,3),o.status=L);else{var K=y+(o.w_bits-8<<4)<<8;K|=(2<=o.strategy||o.level<2?0:o.level<6?1:o.level===6?2:3)<<6,o.strstart!==0&&(K|=32),K+=31-K%31,o.status=L,ot(o,K),o.strstart!==0&&(ot(o,t.adler>>>16),ot(o,65535&t.adler)),t.adler=1}if(o.status===69)if(o.gzhead.extra){for(Z=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>Z&&(t.adler=p(t.adler,o.pending_buf,o.pending-Z,Z)),N(t),Z=o.pending,o.pending!==o.pending_buf_size));)R(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>Z&&(t.adler=p(t.adler,o.pending_buf,o.pending-Z,Z)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(o.status===73)if(o.gzhead.name){Z=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>Z&&(t.adler=p(t.adler,o.pending_buf,o.pending-Z,Z)),N(t),Z=o.pending,o.pending===o.pending_buf_size)){F=1;break}F=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,R(o,F)}while(F!==0);o.gzhead.hcrc&&o.pending>Z&&(t.adler=p(t.adler,o.pending_buf,o.pending-Z,Z)),F===0&&(o.gzindex=0,o.status=91)}else o.status=91;if(o.status===91)if(o.gzhead.comment){Z=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>Z&&(t.adler=p(t.adler,o.pending_buf,o.pending-Z,Z)),N(t),Z=o.pending,o.pending===o.pending_buf_size)){F=1;break}F=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,R(o,F)}while(F!==0);o.gzhead.hcrc&&o.pending>Z&&(t.adler=p(t.adler,o.pending_buf,o.pending-Z,Z)),F===0&&(o.status=103)}else o.status=103;if(o.status===103&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&N(t),o.pending+2<=o.pending_buf_size&&(R(o,255&t.adler),R(o,t.adler>>8&255),t.adler=0,o.status=L)):o.status=L),o.pending!==0){if(N(t),t.avail_out===0)return o.last_flush=-1,b}else if(t.avail_in===0&&ct(z)<=ct(g)&&z!==4)return Q(t,-5);if(o.status===666&&t.avail_in!==0)return Q(t,-5);if(t.avail_in!==0||o.lookahead!==0||z!==_&&o.status!==666){var q=o.strategy===2?function(W,$){for(var st;;){if(W.lookahead===0&&(lt(W),W.lookahead===0)){if($===_)return 1;break}if(W.match_length=0,st=n._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,st&&(e(W,!1),W.strm.avail_out===0))return 1}return W.insert=0,$===4?(e(W,!0),W.strm.avail_out===0?3:4):W.last_lit&&(e(W,!1),W.strm.avail_out===0)?1:2}(o,z):o.strategy===3?function(W,$){for(var st,et,ut,rt,vt=W.window;;){if(W.lookahead<=H){if(lt(W),W.lookahead<=H&&$===_)return 1;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=T&&0<W.strstart&&(et=vt[ut=W.strstart-1])===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]){rt=W.strstart+H;do;while(et===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]&&et===vt[++ut]&&ut<rt);W.match_length=H-(rt-ut),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=T?(st=n._tr_tally(W,1,W.match_length-T),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(st=n._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),st&&(e(W,!1),W.strm.avail_out===0))return 1}return W.insert=0,$===4?(e(W,!0),W.strm.avail_out===0?3:4):W.last_lit&&(e(W,!1),W.strm.avail_out===0)?1:2}(o,z):c[o.level].func(o,z);if(q!==3&&q!==4||(o.status=666),q===1||q===3)return t.avail_out===0&&(o.last_flush=-1),b;if(q===2&&(z===1?n._tr_align(o):z!==5&&(n._tr_stored_block(o,0,0,!1),z===3&&(w(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),N(t),t.avail_out===0))return o.last_flush=-1,b}return z!==4?b:o.wrap<=0?1:(o.wrap===2?(R(o,255&t.adler),R(o,t.adler>>8&255),R(o,t.adler>>16&255),R(o,t.adler>>24&255),R(o,255&t.total_in),R(o,t.total_in>>8&255),R(o,t.total_in>>16&255),R(o,t.total_in>>24&255)):(ot(o,t.adler>>>16),ot(o,65535&t.adler)),N(t),0<o.wrap&&(o.wrap=-o.wrap),o.pending!==0?b:1)},x.deflateEnd=function(t){var z;return t&&t.state?(z=t.state.status)!==J&&z!==69&&z!==73&&z!==91&&z!==103&&z!==L&&z!==666?Q(t,s):(t.state=null,z===L?Q(t,-3):b):s},x.deflateSetDictionary=function(t,z){var g,o,Z,F,K,q,W,$,st=z.length;if(!t||!t.state||(F=(g=t.state).wrap)===2||F===1&&g.status!==J||g.lookahead)return s;for(F===1&&(t.adler=i(t.adler,z,st,0)),g.wrap=0,st>=g.w_size&&(F===0&&(w(g.head),g.strstart=0,g.block_start=0,g.insert=0),$=new d.Buf8(g.w_size),d.arraySet($,z,st-g.w_size,g.w_size,0),z=$,st=g.w_size),K=t.avail_in,q=t.next_in,W=t.input,t.avail_in=st,t.next_in=0,t.input=z,lt(g);g.lookahead>=T;){for(o=g.strstart,Z=g.lookahead-(T-1);g.ins_h=(g.ins_h<<g.hash_shift^g.window[o+T-1])&g.hash_mask,g.prev[o&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=o,o++,--Z;);g.strstart=o,g.lookahead=T-1,lt(g)}return g.strstart+=g.lookahead,g.block_start=g.strstart,g.insert=g.lookahead,g.lookahead=0,g.match_length=g.prev_length=T-1,g.match_available=0,t.next_in=q,t.input=W,t.avail_in=K,g.wrap=F,b},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(v,j,x){"use strict";j.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(v,j,x){"use strict";j.exports=function(c,d){var n,i,p,k,_,b,s,m,y,a,l,h,I,O,T,H,M,J,L,Q,ct,w,N,e,R;n=c.state,i=c.next_in,e=c.input,p=i+(c.avail_in-5),k=c.next_out,R=c.output,_=k-(d-c.avail_out),b=k+(c.avail_out-257),s=n.dmax,m=n.wsize,y=n.whave,a=n.wnext,l=n.window,h=n.hold,I=n.bits,O=n.lencode,T=n.distcode,H=(1<<n.lenbits)-1,M=(1<<n.distbits)-1;t:do{I<15&&(h+=e[i++]<<I,I+=8,h+=e[i++]<<I,I+=8),J=O[h&H];e:for(;;){if(h>>>=L=J>>>24,I-=L,(L=J>>>16&255)==0)R[k++]=65535&J;else{if(!(16&L)){if((64&L)==0){J=O[(65535&J)+(h&(1<<L)-1)];continue e}if(32&L){n.mode=12;break t}c.msg="invalid literal/length code",n.mode=30;break t}Q=65535&J,(L&=15)&&(I<L&&(h+=e[i++]<<I,I+=8),Q+=h&(1<<L)-1,h>>>=L,I-=L),I<15&&(h+=e[i++]<<I,I+=8,h+=e[i++]<<I,I+=8),J=T[h&M];r:for(;;){if(h>>>=L=J>>>24,I-=L,!(16&(L=J>>>16&255))){if((64&L)==0){J=T[(65535&J)+(h&(1<<L)-1)];continue r}c.msg="invalid distance code",n.mode=30;break t}if(ct=65535&J,I<(L&=15)&&(h+=e[i++]<<I,(I+=8)<L&&(h+=e[i++]<<I,I+=8)),s<(ct+=h&(1<<L)-1)){c.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=L,I-=L,(L=k-_)<ct){if(y<(L=ct-L)&&n.sane){c.msg="invalid distance too far back",n.mode=30;break t}if(N=l,(w=0)===a){if(w+=m-L,L<Q){for(Q-=L;R[k++]=l[w++],--L;);w=k-ct,N=R}}else if(a<L){if(w+=m+a-L,(L-=a)<Q){for(Q-=L;R[k++]=l[w++],--L;);if(w=0,a<Q){for(Q-=L=a;R[k++]=l[w++],--L;);w=k-ct,N=R}}}else if(w+=a-L,L<Q){for(Q-=L;R[k++]=l[w++],--L;);w=k-ct,N=R}for(;2<Q;)R[k++]=N[w++],R[k++]=N[w++],R[k++]=N[w++],Q-=3;Q&&(R[k++]=N[w++],1<Q&&(R[k++]=N[w++]))}else{for(w=k-ct;R[k++]=R[w++],R[k++]=R[w++],R[k++]=R[w++],2<(Q-=3););Q&&(R[k++]=R[w++],1<Q&&(R[k++]=R[w++]))}break}}break}}while(i<p&&k<b);i-=Q=I>>3,h&=(1<<(I-=Q<<3))-1,c.next_in=i,c.next_out=k,c.avail_in=i<p?p-i+5:5-(i-p),c.avail_out=k<b?b-k+257:257-(k-b),n.hold=h,n.bits=I}},{}],49:[function(v,j,x){"use strict";var c=v("../utils/common"),d=v("./adler32"),n=v("./crc32"),i=v("./inffast"),p=v("./inftrees"),k=1,_=2,b=0,s=-2,m=1,y=852,a=592;function l(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(w){var N;return w&&w.state?(N=w.state,w.total_in=w.total_out=N.total=0,w.msg="",N.wrap&&(w.adler=1&N.wrap),N.mode=m,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new c.Buf32(y),N.distcode=N.distdyn=new c.Buf32(a),N.sane=1,N.back=-1,b):s}function O(w){var N;return w&&w.state?((N=w.state).wsize=0,N.whave=0,N.wnext=0,I(w)):s}function T(w,N){var e,R;return w&&w.state?(R=w.state,N<0?(e=0,N=-N):(e=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?s:(R.window!==null&&R.wbits!==N&&(R.window=null),R.wrap=e,R.wbits=N,O(w))):s}function H(w,N){var e,R;return w?(R=new h,(w.state=R).window=null,(e=T(w,N))!==b&&(w.state=null),e):s}var M,J,L=!0;function Q(w){if(L){var N;for(M=new c.Buf32(512),J=new c.Buf32(32),N=0;N<144;)w.lens[N++]=8;for(;N<256;)w.lens[N++]=9;for(;N<280;)w.lens[N++]=7;for(;N<288;)w.lens[N++]=8;for(p(k,w.lens,0,288,M,0,w.work,{bits:9}),N=0;N<32;)w.lens[N++]=5;p(_,w.lens,0,32,J,0,w.work,{bits:5}),L=!1}w.lencode=M,w.lenbits=9,w.distcode=J,w.distbits=5}function ct(w,N,e,R){var ot,Y=w.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new c.Buf8(Y.wsize)),R>=Y.wsize?(c.arraySet(Y.window,N,e-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(R<(ot=Y.wsize-Y.wnext)&&(ot=R),c.arraySet(Y.window,N,e-R,ot,Y.wnext),(R-=ot)?(c.arraySet(Y.window,N,e-R,R,0),Y.wnext=R,Y.whave=Y.wsize):(Y.wnext+=ot,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=ot))),0}x.inflateReset=O,x.inflateReset2=T,x.inflateResetKeep=I,x.inflateInit=function(w){return H(w,15)},x.inflateInit2=H,x.inflate=function(w,N){var e,R,ot,Y,lt,G,it,D,B,kt,f,E,t,z,g,o,Z,F,K,q,W,$,st,et,ut=0,rt=new c.Buf8(4),vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return s;(e=w.state).mode===12&&(e.mode=13),lt=w.next_out,ot=w.output,it=w.avail_out,Y=w.next_in,R=w.input,G=w.avail_in,D=e.hold,B=e.bits,kt=G,f=it,$=b;t:for(;;)switch(e.mode){case m:if(e.wrap===0){e.mode=13;break}for(;B<16;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(2&e.wrap&&D===35615){rt[e.check=0]=255&D,rt[1]=D>>>8&255,e.check=n(e.check,rt,2,0),B=D=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&D)<<8)+(D>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&D)!=8){w.msg="unknown compression method",e.mode=30;break}if(B-=4,W=8+(15&(D>>>=4)),e.wbits===0)e.wbits=W;else if(W>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<W,w.adler=e.check=1,e.mode=512&D?10:12,B=D=0;break;case 2:for(;B<16;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(e.flags=D,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=D>>8&1),512&e.flags&&(rt[0]=255&D,rt[1]=D>>>8&255,e.check=n(e.check,rt,2,0)),B=D=0,e.mode=3;case 3:for(;B<32;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}e.head&&(e.head.time=D),512&e.flags&&(rt[0]=255&D,rt[1]=D>>>8&255,rt[2]=D>>>16&255,rt[3]=D>>>24&255,e.check=n(e.check,rt,4,0)),B=D=0,e.mode=4;case 4:for(;B<16;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}e.head&&(e.head.xflags=255&D,e.head.os=D>>8),512&e.flags&&(rt[0]=255&D,rt[1]=D>>>8&255,e.check=n(e.check,rt,2,0)),B=D=0,e.mode=5;case 5:if(1024&e.flags){for(;B<16;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}e.length=D,e.head&&(e.head.extra_len=D),512&e.flags&&(rt[0]=255&D,rt[1]=D>>>8&255,e.check=n(e.check,rt,2,0)),B=D=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(G<(E=e.length)&&(E=G),E&&(e.head&&(W=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),c.arraySet(e.head.extra,R,Y,E,W)),512&e.flags&&(e.check=n(e.check,R,E,Y)),G-=E,Y+=E,e.length-=E),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(G===0)break t;for(E=0;W=R[Y+E++],e.head&&W&&e.length<65536&&(e.head.name+=String.fromCharCode(W)),W&&E<G;);if(512&e.flags&&(e.check=n(e.check,R,E,Y)),G-=E,Y+=E,W)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(G===0)break t;for(E=0;W=R[Y+E++],e.head&&W&&e.length<65536&&(e.head.comment+=String.fromCharCode(W)),W&&E<G;);if(512&e.flags&&(e.check=n(e.check,R,E,Y)),G-=E,Y+=E,W)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;B<16;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(D!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}B=D=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;B<32;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}w.adler=e.check=l(D),B=D=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=lt,w.avail_out=it,w.next_in=Y,w.avail_in=G,e.hold=D,e.bits=B,2;w.adler=e.check=1,e.mode=12;case 12:if(N===5||N===6)break t;case 13:if(e.last){D>>>=7&B,B-=7&B,e.mode=27;break}for(;B<3;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}switch(e.last=1&D,B-=1,3&(D>>>=1)){case 0:e.mode=14;break;case 1:if(Q(e),e.mode=20,N!==6)break;D>>>=2,B-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}D>>>=2,B-=2;break;case 14:for(D>>>=7&B,B-=7&B;B<32;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if((65535&D)!=(D>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&D,B=D=0,e.mode=15,N===6)break t;case 15:e.mode=16;case 16:if(E=e.length){if(G<E&&(E=G),it<E&&(E=it),E===0)break t;c.arraySet(ot,R,Y,E,lt),G-=E,Y+=E,it-=E,lt+=E,e.length-=E;break}e.mode=12;break;case 17:for(;B<14;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(e.nlen=257+(31&D),D>>>=5,B-=5,e.ndist=1+(31&D),D>>>=5,B-=5,e.ncode=4+(15&D),D>>>=4,B-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;B<3;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}e.lens[vt[e.have++]]=7&D,D>>>=3,B-=3}for(;e.have<19;)e.lens[vt[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,st={bits:e.lenbits},$=p(0,e.lens,0,19,e.lencode,0,e.work,st),e.lenbits=st.bits,$){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;o=(ut=e.lencode[D&(1<<e.lenbits)-1])>>>16&255,Z=65535&ut,!((g=ut>>>24)<=B);){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(Z<16)D>>>=g,B-=g,e.lens[e.have++]=Z;else{if(Z===16){for(et=g+2;B<et;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(D>>>=g,B-=g,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}W=e.lens[e.have-1],E=3+(3&D),D>>>=2,B-=2}else if(Z===17){for(et=g+3;B<et;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}B-=g,W=0,E=3+(7&(D>>>=g)),D>>>=3,B-=3}else{for(et=g+7;B<et;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}B-=g,W=0,E=11+(127&(D>>>=g)),D>>>=7,B-=7}if(e.have+E>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;E--;)e.lens[e.have++]=W}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,st={bits:e.lenbits},$=p(k,e.lens,0,e.nlen,e.lencode,0,e.work,st),e.lenbits=st.bits,$){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,st={bits:e.distbits},$=p(_,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,st),e.distbits=st.bits,$){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,N===6)break t;case 20:e.mode=21;case 21:if(6<=G&&258<=it){w.next_out=lt,w.avail_out=it,w.next_in=Y,w.avail_in=G,e.hold=D,e.bits=B,i(w,f),lt=w.next_out,ot=w.output,it=w.avail_out,Y=w.next_in,R=w.input,G=w.avail_in,D=e.hold,B=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;o=(ut=e.lencode[D&(1<<e.lenbits)-1])>>>16&255,Z=65535&ut,!((g=ut>>>24)<=B);){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(o&&(240&o)==0){for(F=g,K=o,q=Z;o=(ut=e.lencode[q+((D&(1<<F+K)-1)>>F)])>>>16&255,Z=65535&ut,!(F+(g=ut>>>24)<=B);){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}D>>>=F,B-=F,e.back+=F}if(D>>>=g,B-=g,e.back+=g,e.length=Z,o===0){e.mode=26;break}if(32&o){e.back=-1,e.mode=12;break}if(64&o){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&o,e.mode=22;case 22:if(e.extra){for(et=e.extra;B<et;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}e.length+=D&(1<<e.extra)-1,D>>>=e.extra,B-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;o=(ut=e.distcode[D&(1<<e.distbits)-1])>>>16&255,Z=65535&ut,!((g=ut>>>24)<=B);){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if((240&o)==0){for(F=g,K=o,q=Z;o=(ut=e.distcode[q+((D&(1<<F+K)-1)>>F)])>>>16&255,Z=65535&ut,!(F+(g=ut>>>24)<=B);){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}D>>>=F,B-=F,e.back+=F}if(D>>>=g,B-=g,e.back+=g,64&o){w.msg="invalid distance code",e.mode=30;break}e.offset=Z,e.extra=15&o,e.mode=24;case 24:if(e.extra){for(et=e.extra;B<et;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}e.offset+=D&(1<<e.extra)-1,D>>>=e.extra,B-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(it===0)break t;if(E=f-it,e.offset>E){if((E=e.offset-E)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}t=E>e.wnext?(E-=e.wnext,e.wsize-E):e.wnext-E,E>e.length&&(E=e.length),z=e.window}else z=ot,t=lt-e.offset,E=e.length;for(it<E&&(E=it),it-=E,e.length-=E;ot[lt++]=z[t++],--E;);e.length===0&&(e.mode=21);break;case 26:if(it===0)break t;ot[lt++]=e.length,it--,e.mode=21;break;case 27:if(e.wrap){for(;B<32;){if(G===0)break t;G--,D|=R[Y++]<<B,B+=8}if(f-=it,w.total_out+=f,e.total+=f,f&&(w.adler=e.check=e.flags?n(e.check,ot,f,lt-f):d(e.check,ot,f,lt-f)),f=it,(e.flags?D:l(D))!==e.check){w.msg="incorrect data check",e.mode=30;break}B=D=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;B<32;){if(G===0)break t;G--,D+=R[Y++]<<B,B+=8}if(D!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}B=D=0}e.mode=29;case 29:$=1;break t;case 30:$=-3;break t;case 31:return-4;case 32:default:return s}return w.next_out=lt,w.avail_out=it,w.next_in=Y,w.avail_in=G,e.hold=D,e.bits=B,(e.wsize||f!==w.avail_out&&e.mode<30&&(e.mode<27||N!==4))&&ct(w,w.output,w.next_out,f-w.avail_out)?(e.mode=31,-4):(kt-=w.avail_in,f-=w.avail_out,w.total_in+=kt,w.total_out+=f,e.total+=f,e.wrap&&f&&(w.adler=e.check=e.flags?n(e.check,ot,f,w.next_out-f):d(e.check,ot,f,w.next_out-f)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(kt==0&&f===0||N===4)&&$===b&&($=-5),$)},x.inflateEnd=function(w){if(!w||!w.state)return s;var N=w.state;return N.window&&(N.window=null),w.state=null,b},x.inflateGetHeader=function(w,N){var e;return w&&w.state?(2&(e=w.state).wrap)==0?s:((e.head=N).done=!1,b):s},x.inflateSetDictionary=function(w,N){var e,R=N.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?s:e.mode===11&&d(1,N,R,0)!==e.check?-3:ct(w,N,R,R)?(e.mode=31,-4):(e.havedict=1,b):s},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(v,j,x){"use strict";var c=v("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];j.exports=function(k,_,b,s,m,y,a,l){var h,I,O,T,H,M,J,L,Q,ct=l.bits,w=0,N=0,e=0,R=0,ot=0,Y=0,lt=0,G=0,it=0,D=0,B=null,kt=0,f=new c.Buf16(16),E=new c.Buf16(16),t=null,z=0;for(w=0;w<=15;w++)f[w]=0;for(N=0;N<s;N++)f[_[b+N]]++;for(ot=ct,R=15;1<=R&&f[R]===0;R--);if(R<ot&&(ot=R),R===0)return m[y++]=20971520,m[y++]=20971520,l.bits=1,0;for(e=1;e<R&&f[e]===0;e++);for(ot<e&&(ot=e),w=G=1;w<=15;w++)if(G<<=1,(G-=f[w])<0)return-1;if(0<G&&(k===0||R!==1))return-1;for(E[1]=0,w=1;w<15;w++)E[w+1]=E[w]+f[w];for(N=0;N<s;N++)_[b+N]!==0&&(a[E[_[b+N]]++]=N);if(M=k===0?(B=t=a,19):k===1?(B=d,kt-=257,t=n,z-=257,256):(B=i,t=p,-1),w=e,H=y,lt=N=D=0,O=-1,T=(it=1<<(Y=ot))-1,k===1&&852<it||k===2&&592<it)return 1;for(;;){for(J=w-lt,Q=a[N]<M?(L=0,a[N]):a[N]>M?(L=t[z+a[N]],B[kt+a[N]]):(L=96,0),h=1<<w-lt,e=I=1<<Y;m[H+(D>>lt)+(I-=h)]=J<<24|L<<16|Q|0,I!==0;);for(h=1<<w-1;D&h;)h>>=1;if(h!==0?(D&=h-1,D+=h):D=0,N++,--f[w]==0){if(w===R)break;w=_[b+a[N]]}if(ot<w&&(D&T)!==O){for(lt===0&&(lt=ot),H+=e,G=1<<(Y=w-lt);Y+lt<R&&!((G-=f[Y+lt])<=0);)Y++,G<<=1;if(it+=1<<Y,k===1&&852<it||k===2&&592<it)return 1;m[O=D&T]=ot<<24|Y<<16|H-y|0}}return D!==0&&(m[H+D]=w-lt<<24|64<<16|0),l.bits=ot,0}},{"../utils/common":41}],51:[function(v,j,x){"use strict";j.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(v,j,x){"use strict";var c=v("../utils/common");function d(f){for(var E=f.length;0<=--E;)f[E]=0}var n=15,i=16,p=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],s=new Array(576);d(s);var m=new Array(60);d(m);var y=new Array(512);d(y);var a=new Array(256);d(a);var l=new Array(29);d(l);var h,I,O,T=new Array(30);function H(f,E,t,z,g){this.static_tree=f,this.extra_bits=E,this.extra_base=t,this.elems=z,this.max_length=g,this.has_stree=f&&f.length}function M(f,E){this.dyn_tree=f,this.max_code=0,this.stat_desc=E}function J(f){return f<256?y[f]:y[256+(f>>>7)]}function L(f,E){f.pending_buf[f.pending++]=255&E,f.pending_buf[f.pending++]=E>>>8&255}function Q(f,E,t){f.bi_valid>i-t?(f.bi_buf|=E<<f.bi_valid&65535,L(f,f.bi_buf),f.bi_buf=E>>i-f.bi_valid,f.bi_valid+=t-i):(f.bi_buf|=E<<f.bi_valid&65535,f.bi_valid+=t)}function ct(f,E,t){Q(f,t[2*E],t[2*E+1])}function w(f,E){for(var t=0;t|=1&f,f>>>=1,t<<=1,0<--E;);return t>>>1}function N(f,E,t){var z,g,o=new Array(n+1),Z=0;for(z=1;z<=n;z++)o[z]=Z=Z+t[z-1]<<1;for(g=0;g<=E;g++){var F=f[2*g+1];F!==0&&(f[2*g]=w(o[F]++,F))}}function e(f){var E;for(E=0;E<286;E++)f.dyn_ltree[2*E]=0;for(E=0;E<30;E++)f.dyn_dtree[2*E]=0;for(E=0;E<19;E++)f.bl_tree[2*E]=0;f.dyn_ltree[512]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function R(f){8<f.bi_valid?L(f,f.bi_buf):0<f.bi_valid&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function ot(f,E,t,z){var g=2*E,o=2*t;return f[g]<f[o]||f[g]===f[o]&&z[E]<=z[t]}function Y(f,E,t){for(var z=f.heap[t],g=t<<1;g<=f.heap_len&&(g<f.heap_len&&ot(E,f.heap[g+1],f.heap[g],f.depth)&&g++,!ot(E,z,f.heap[g],f.depth));)f.heap[t]=f.heap[g],t=g,g<<=1;f.heap[t]=z}function lt(f,E,t){var z,g,o,Z,F=0;if(f.last_lit!==0)for(;z=f.pending_buf[f.d_buf+2*F]<<8|f.pending_buf[f.d_buf+2*F+1],g=f.pending_buf[f.l_buf+F],F++,z===0?ct(f,g,E):(ct(f,(o=a[g])+256+1,E),(Z=p[o])!==0&&Q(f,g-=l[o],Z),ct(f,o=J(--z),t),(Z=k[o])!==0&&Q(f,z-=T[o],Z)),F<f.last_lit;);ct(f,256,E)}function G(f,E){var t,z,g,o=E.dyn_tree,Z=E.stat_desc.static_tree,F=E.stat_desc.has_stree,K=E.stat_desc.elems,q=-1;for(f.heap_len=0,f.heap_max=573,t=0;t<K;t++)o[2*t]!==0?(f.heap[++f.heap_len]=q=t,f.depth[t]=0):o[2*t+1]=0;for(;f.heap_len<2;)o[2*(g=f.heap[++f.heap_len]=q<2?++q:0)]=1,f.depth[g]=0,f.opt_len--,F&&(f.static_len-=Z[2*g+1]);for(E.max_code=q,t=f.heap_len>>1;1<=t;t--)Y(f,o,t);for(g=K;t=f.heap[1],f.heap[1]=f.heap[f.heap_len--],Y(f,o,1),z=f.heap[1],f.heap[--f.heap_max]=t,f.heap[--f.heap_max]=z,o[2*g]=o[2*t]+o[2*z],f.depth[g]=(f.depth[t]>=f.depth[z]?f.depth[t]:f.depth[z])+1,o[2*t+1]=o[2*z+1]=g,f.heap[1]=g++,Y(f,o,1),2<=f.heap_len;);f.heap[--f.heap_max]=f.heap[1],function(W,$){var st,et,ut,rt,vt,Jt,St=$.dyn_tree,be=$.max_code,vr=$.stat_desc.static_tree,yr=$.stat_desc.has_stree,br=$.stat_desc.extra_bits,we=$.stat_desc.extra_base,Ut=$.stat_desc.max_length,Yt=0;for(rt=0;rt<=n;rt++)W.bl_count[rt]=0;for(St[2*W.heap[W.heap_max]+1]=0,st=W.heap_max+1;st<573;st++)Ut<(rt=St[2*St[2*(et=W.heap[st])+1]+1]+1)&&(rt=Ut,Yt++),St[2*et+1]=rt,be<et||(W.bl_count[rt]++,vt=0,we<=et&&(vt=br[et-we]),Jt=St[2*et],W.opt_len+=Jt*(rt+vt),yr&&(W.static_len+=Jt*(vr[2*et+1]+vt)));if(Yt!==0){do{for(rt=Ut-1;W.bl_count[rt]===0;)rt--;W.bl_count[rt]--,W.bl_count[rt+1]+=2,W.bl_count[Ut]--,Yt-=2}while(0<Yt);for(rt=Ut;rt!==0;rt--)for(et=W.bl_count[rt];et!==0;)be<(ut=W.heap[--st])||(St[2*ut+1]!==rt&&(W.opt_len+=(rt-St[2*ut+1])*St[2*ut],St[2*ut+1]=rt),et--)}}(f,E),N(o,q,f.bl_count)}function it(f,E,t){var z,g,o=-1,Z=E[1],F=0,K=7,q=4;for(Z===0&&(K=138,q=3),E[2*(t+1)+1]=65535,z=0;z<=t;z++)g=Z,Z=E[2*(z+1)+1],++F<K&&g===Z||(F<q?f.bl_tree[2*g]+=F:g!==0?(g!==o&&f.bl_tree[2*g]++,f.bl_tree[32]++):F<=10?f.bl_tree[34]++:f.bl_tree[36]++,o=g,q=(F=0)===Z?(K=138,3):g===Z?(K=6,3):(K=7,4))}function D(f,E,t){var z,g,o=-1,Z=E[1],F=0,K=7,q=4;for(Z===0&&(K=138,q=3),z=0;z<=t;z++)if(g=Z,Z=E[2*(z+1)+1],!(++F<K&&g===Z)){if(F<q)for(;ct(f,g,f.bl_tree),--F!=0;);else g!==0?(g!==o&&(ct(f,g,f.bl_tree),F--),ct(f,16,f.bl_tree),Q(f,F-3,2)):F<=10?(ct(f,17,f.bl_tree),Q(f,F-3,3)):(ct(f,18,f.bl_tree),Q(f,F-11,7));o=g,q=(F=0)===Z?(K=138,3):g===Z?(K=6,3):(K=7,4)}}d(T);var B=!1;function kt(f,E,t,z){var g,o,Z;Q(f,0+(z?1:0),3),o=E,Z=t,R(g=f),L(g,Z),L(g,~Z),c.arraySet(g.pending_buf,g.window,o,Z,g.pending),g.pending+=Z}x._tr_init=function(f){B||(function(){var E,t,z,g,o,Z=new Array(n+1);for(g=z=0;g<28;g++)for(l[g]=z,E=0;E<1<<p[g];E++)a[z++]=g;for(a[z-1]=g,g=o=0;g<16;g++)for(T[g]=o,E=0;E<1<<k[g];E++)y[o++]=g;for(o>>=7;g<30;g++)for(T[g]=o<<7,E=0;E<1<<k[g]-7;E++)y[256+o++]=g;for(t=0;t<=n;t++)Z[t]=0;for(E=0;E<=143;)s[2*E+1]=8,E++,Z[8]++;for(;E<=255;)s[2*E+1]=9,E++,Z[9]++;for(;E<=279;)s[2*E+1]=7,E++,Z[7]++;for(;E<=287;)s[2*E+1]=8,E++,Z[8]++;for(N(s,287,Z),E=0;E<30;E++)m[2*E+1]=5,m[2*E]=w(E,5);h=new H(s,p,257,286,n),I=new H(m,k,0,30,n),O=new H(new Array(0),_,0,19,7)}(),B=!0),f.l_desc=new M(f.dyn_ltree,h),f.d_desc=new M(f.dyn_dtree,I),f.bl_desc=new M(f.bl_tree,O),f.bi_buf=0,f.bi_valid=0,e(f)},x._tr_stored_block=kt,x._tr_flush_block=function(f,E,t,z){var g,o,Z=0;0<f.level?(f.strm.data_type===2&&(f.strm.data_type=function(F){var K,q=4093624447;for(K=0;K<=31;K++,q>>>=1)if(1&q&&F.dyn_ltree[2*K]!==0)return 0;if(F.dyn_ltree[18]!==0||F.dyn_ltree[20]!==0||F.dyn_ltree[26]!==0)return 1;for(K=32;K<256;K++)if(F.dyn_ltree[2*K]!==0)return 1;return 0}(f)),G(f,f.l_desc),G(f,f.d_desc),Z=function(F){var K;for(it(F,F.dyn_ltree,F.l_desc.max_code),it(F,F.dyn_dtree,F.d_desc.max_code),G(F,F.bl_desc),K=18;3<=K&&F.bl_tree[2*b[K]+1]===0;K--);return F.opt_len+=3*(K+1)+5+5+4,K}(f),g=f.opt_len+3+7>>>3,(o=f.static_len+3+7>>>3)<=g&&(g=o)):g=o=t+5,t+4<=g&&E!==-1?kt(f,E,t,z):f.strategy===4||o===g?(Q(f,2+(z?1:0),3),lt(f,s,m)):(Q(f,4+(z?1:0),3),function(F,K,q,W){var $;for(Q(F,K-257,5),Q(F,q-1,5),Q(F,W-4,4),$=0;$<W;$++)Q(F,F.bl_tree[2*b[$]+1],3);D(F,F.dyn_ltree,K-1),D(F,F.dyn_dtree,q-1)}(f,f.l_desc.max_code+1,f.d_desc.max_code+1,Z+1),lt(f,f.dyn_ltree,f.dyn_dtree)),e(f),z&&R(f)},x._tr_tally=function(f,E,t){return f.pending_buf[f.d_buf+2*f.last_lit]=E>>>8&255,f.pending_buf[f.d_buf+2*f.last_lit+1]=255&E,f.pending_buf[f.l_buf+f.last_lit]=255&t,f.last_lit++,E===0?f.dyn_ltree[2*t]++:(f.matches++,E--,f.dyn_ltree[2*(a[t]+256+1)]++,f.dyn_dtree[2*J(E)]++),f.last_lit===f.lit_bufsize-1},x._tr_align=function(f){var E;Q(f,2,3),ct(f,256,s),(E=f).bi_valid===16?(L(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}},{"../utils/common":41}],53:[function(v,j,x){"use strict";j.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(v,j,x){"use strict";j.exports=typeof setImmediate=="function"?setImmediate:function(){var c=[].slice.apply(arguments);c.splice(1,0,0),setTimeout.apply(null,c)}},{}]},{},[10])(10)})}).call(this,pt!==void 0?pt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,nt!==void 0?nt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,U!==void 0?U:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,A!==void 0?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})});var Se=Tt((te,ee)=>{(function(r,u){typeof define=="function"&&define.amd?define([],u):typeof te!="undefined"?u():(u(),r.FileSaver={})})(te,function(){"use strict";function r(U,V){return typeof V=="undefined"?V={autoBom:!1}:typeof V!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),V={autoBom:!V}),V.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(U.type)?new Blob(["\uFEFF",U],{type:U.type}):U}function u(U,V,at){var tt=new XMLHttpRequest;tt.open("GET",U),tt.responseType="blob",tt.onload=function(){X(tt.response,V,at)},tt.onerror=function(){console.error("could not download file")},tt.send()}function C(U){var V=new XMLHttpRequest;V.open("HEAD",U,!1);try{V.send()}catch(at){}return 200<=V.status&&299>=V.status}function A(U){try{U.dispatchEvent(new MouseEvent("click"))}catch(at){var V=document.createEvent("MouseEvents");V.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(V)}}var S=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,P=S.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),X=S.saveAs||(typeof window!="object"||window!==S?function(){}:"download"in HTMLAnchorElement.prototype&&!P?function(U,V,at){var tt=S.URL||S.webkitURL,nt=document.createElement("a");V=V||U.name||"download",nt.download=V,nt.rel="noopener",typeof U=="string"?(nt.href=U,nt.origin===location.origin?A(nt):C(nt.href)?u(U,V,at):A(nt,nt.target="_blank")):(nt.href=tt.createObjectURL(U),setTimeout(function(){tt.revokeObjectURL(nt.href)},4e4),setTimeout(function(){A(nt)},0))}:"msSaveOrOpenBlob"in navigator?function(U,V,at){if(V=V||U.name||"download",typeof U!="string")navigator.msSaveOrOpenBlob(r(U,at),V);else if(C(U))u(U,V,at);else{var tt=document.createElement("a");tt.href=U,tt.target="_blank",setTimeout(function(){A(tt)})}}:function(U,V,at,tt){if(tt=tt||open("","_blank"),tt&&(tt.document.title=tt.document.body.innerText="downloading..."),typeof U=="string")return u(U,V,at);var nt=U.type==="application/octet-stream",ft=/constructor/i.test(S.HTMLElement)||S.safari,yt=/CriOS\/[\d]+/.test(navigator.userAgent);if((yt||nt&&ft||P)&&typeof FileReader!="undefined"){var bt=new FileReader;bt.onloadend=function(){var _t=bt.result;_t=yt?_t:_t.replace(/^data:[^;]*;/,"data:attachment/file;"),tt?tt.location.href=_t:location=_t,tt=null},bt.readAsDataURL(U)}else{var pt=S.URL||S.webkitURL,mt=pt.createObjectURL(U);tt?tt.location=mt:location.href=mt,tt=null,setTimeout(function(){pt.revokeObjectURL(mt)},4e4)}});S.saveAs=X.saveAs=X,typeof ee!="undefined"&&(ee.exports=X)})});var Ce=Tt((se,Te)=>{(function(r,u){"use strict";typeof define=="function"&&define.amd?define([],u):typeof se=="object"?Te.exports=u():r.Timer=u()})(se,function(){"use strict";var r={tick:1,onstart:null,ontick:null,onpause:null,onstop:null,onend:null},u=function(P){if(!(this instanceof u))return new u(P);this._={id:+new Date,options:{},duration:0,status:"initialized",start:0,measures:[]};for(var X in r)this._.options[X]=r[X];this.options(P)};u.prototype.start=function(P){return!+P&&!this._.duration?this:(P&&(P*=1e3),this._.timeout&&this._.status==="started"?this:(this._.duration=P||this._.duration,this._.timeout=setTimeout(C.bind(this),this._.duration),typeof this._.options.ontick=="function"&&(this._.interval=setInterval(function(){A.call(this,"ontick",this.getDuration())}.bind(this),+this._.options.tick*1e3)),this._.start=+new Date,this._.status="started",A.call(this,"onstart",this.getDuration()),this))},u.prototype.pause=function(){return this._.status!=="started"?this:(this._.duration-=+new Date-this._.start,S.call(this,!1),this._.status="paused",A.call(this,"onpause"),this)},u.prototype.stop=function(){return/started|paused/.test(this._.status)?(S.call(this,!0),this._.status="stopped",A.call(this,"onstop"),this):this},u.prototype.getDuration=function(){return this._.status==="started"?this._.duration-(+new Date-this._.start):this._.status==="paused"?this._.duration:0},u.prototype.getStatus=function(){return this._.status},u.prototype.options=function(P,X){if(P&&X&&(this._.options[P]=X),!X&&typeof P=="object")for(var U in P)this._.options.hasOwnProperty(U)&&(this._.options[U]=P[U]);return this},u.prototype.on=function(P,X){return typeof P!="string"||typeof X!="function"?this:(/^on/.test(P)||(P="on"+P),this._.options.hasOwnProperty(P)&&(this._.options[P]=X),this)},u.prototype.off=function(P){return typeof P!="string"?this:(P=P.toLowerCase(),P==="all"?(this._.options=r,this):(/^on/.test(P)||(P="on"+P),this._.options.hasOwnProperty(P)&&(this._.options[P]=r[P]),this))},u.prototype.measureStart=function(P){return this._.measures[P||""]=+new Date,this},u.prototype.measureStop=function(P){return+new Date-this._.measures[P||""]};function C(){S.call(this),this._.status="stopped",A.call(this,"onend")}function A(P){var X=this._.options[P],U=[].slice.call(arguments,1);typeof X=="function"&&X.apply(this,U)}function S(P){clearTimeout(this._.timeout),clearInterval(this._.interval),P===!0&&(this._.duration=0)}return u})});var De=Tt((wn,oe)=>{"use strict";var Ir=(r,u)=>Math.floor(Math.random()*(u-r+1)+r),Ie=()=>{let r=new Error("Delay aborted");return r.name="AbortError",r},ze=({clearTimeout:r,setTimeout:u,willResolve:C})=>(A,{value:S,signal:P}={})=>{if(P&&P.aborted)return Promise.reject(Ie());let X,U,V,at=r||clearTimeout,tt=()=>{at(X),V(Ie())},nt=()=>{P&&P.removeEventListener("abort",tt)},ft=new Promise((yt,bt)=>{U=()=>{nt(),C?yt(S):bt(S)},V=bt,X=(u||setTimeout)(U,A)});return P&&P.addEventListener("abort",tt,{once:!0}),ft.clear=()=>{at(X),X=null,U()},ft},Oe=r=>{let u=ze({...r,willResolve:!0});return u.reject=ze({...r,willResolve:!1}),u.range=(C,A,S)=>u(Ir(C,A),S),u},ae=Oe();ae.createWithTimers=Oe;oe.exports=ae;oe.exports.default=ae});var Pe=Tt((kn,Re)=>{function Et(r,u){typeof u=="boolean"&&(u={forever:u}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=u||{},this._maxRetryTime=u&&u.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Re.exports=Et;Et.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Et.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Et.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var u=new Date().getTime();if(r&&u-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var C=this._timeouts.shift();if(C===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),C=this._cachedTimeouts.slice(-1);else return!1;var A=this;return this._timer=setTimeout(function(){A._attempts++,A._operationTimeoutCb&&(A._timeout=setTimeout(function(){A._operationTimeoutCb(A._attempts)},A._operationTimeout),A._options.unref&&A._timeout.unref()),A._fn(A._attempts)},C),this._options.unref&&this._timer.unref(),!0};Et.prototype.attempt=function(r,u){this._fn=r,u&&(u.timeout&&(this._operationTimeout=u.timeout),u.cb&&(this._operationTimeoutCb=u.cb));var C=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){C._operationTimeoutCb()},C._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Et.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};Et.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};Et.prototype.start=Et.prototype.try;Et.prototype.errors=function(){return this._errors};Et.prototype.attempts=function(){return this._attempts};Et.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},u=null,C=0,A=0;A<this._errors.length;A++){var S=this._errors[A],P=S.message,X=(r[P]||0)+1;r[P]=X,X>=C&&(u=S,C=X)}return u}});var Be=Tt(It=>{var zr=Pe();It.operation=function(r){var u=It.timeouts(r);return new zr(u,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};It.timeouts=function(r){if(r instanceof Array)return[].concat(r);var u={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var C in r)u[C]=r[C];if(u.minTimeout>u.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var A=[],S=0;S<u.retries;S++)A.push(this.createTimeout(S,u));return r&&r.forever&&!A.length&&A.push(this.createTimeout(S,u)),A.sort(function(P,X){return P-X}),A};It.createTimeout=function(r,u){var C=u.randomize?Math.random()+1:1,A=Math.round(C*Math.max(u.minTimeout,1)*Math.pow(u.factor,r));return A=Math.min(A,u.maxTimeout),A};It.wrap=function(r,u,C){if(u instanceof Array&&(C=u,u=null),!C){C=[];for(var A in r)typeof r[A]=="function"&&C.push(A)}for(var S=0;S<C.length;S++){var P=C[S],X=r[P];r[P]=function(V){var at=It.operation(u),tt=Array.prototype.slice.call(arguments,1),nt=tt.pop();tt.push(function(ft){at.retry(ft)||(ft&&(arguments[0]=at.mainError()),nt.apply(this,arguments))}),at.attempt(function(){V.apply(r,tt)})}.bind(r,X),r[P].options=u}}});var Ne=Tt((En,Le)=>{Le.exports=Be()});var Ue=Tt((xn,Kt)=>{"use strict";var Or=Ne(),Dr=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],ue=class extends Error{constructor(u){super();u instanceof Error?(this.originalError=u,{message:u}=u):(this.originalError=new Error(u),this.originalError.stack=this.stack),this.name="AbortError",this.message=u}},Rr=(r,u,C)=>{let A=C.retries-(u-1);return r.attemptNumber=u,r.retriesLeft=A,r},Pr=r=>Dr.includes(r),Fe=(r,u)=>new Promise((C,A)=>{u={onFailedAttempt:()=>{},retries:10,...u};let S=Or.operation(u);S.attempt(async P=>{try{C(await r(P))}catch(X){if(!(X instanceof Error)){A(new TypeError(`Non-error was thrown: "${X}". You should only throw errors.`));return}if(X instanceof ue)S.stop(),A(X.originalError);else if(X instanceof TypeError&&!Pr(X.message))S.stop(),A(X);else{Rr(X,P,u);try{await u.onFailedAttempt(X)}catch(U){A(U);return}S.retry(X)||A(S.mainError())}}})});Kt.exports=Fe;Kt.exports.default=Fe;Kt.exports.AbortError=ue});(function(r,u){if(typeof r.createEvent!="function")return!1;var C=function(i){var p=i.toLowerCase(),k="MS"+i;return navigator.msPointerEnabled?k:window.PointerEvent?p:!1},A=function(i){return"on"+i in window?i:!1},S={useJquery:!u.IGNORE_JQUERY&&typeof jQuery!="undefined",swipeThreshold:u.SWIPE_THRESHOLD||100,tapThreshold:u.TAP_THRESHOLD||150,dbltapThreshold:u.DBL_TAP_THRESHOLD||200,longtapThreshold:u.LONG_TAP_THRESHOLD||1e3,tapPrecision:u.TAP_PRECISION/2||60/2,justTouchEvents:u.JUST_ON_TOUCH_DEVICES},P=!1,X={touchstart:A("touchstart")||C("PointerDown"),touchend:A("touchend")||C("PointerUp"),touchmove:A("touchmove")||C("PointerMove")},U=function(i){return!i.pointerId||typeof _t=="undefined"||i.pointerId===_t},V=function(i,p,k){for(var _=p.split(" "),b=_.length;b--;)i.addEventListener(_[b],k,!1)},at=function(i){var p=Boolean(i.targetTouches&&i.targetTouches.length);switch(!0){case Boolean(i.target.touches):return i.target.touches[0];case(p&&typeof i.targetTouches[0].pageX!="undefined"):return i.targetTouches[0];case(p&&Boolean(i.targetTouches[0].touches)):return i.targetTouches[0].touches[0];default:return i}},tt=function(i){return(i.targetTouches||i.target.touches||[]).length>1},nt=function(){return new Date().getTime()},ft=function(i,p,k,_){var b=r.createEvent("Event");if(b.originalEvent=k,_=_||{},_.x=wt,_.y=ht,S.useJquery&&(b=jQuery.Event(p,{originalEvent:k}),jQuery(i).trigger(b,_)),b.initEvent){for(var s in _)b[s]=_[s];b.initEvent(p,!0,!0),i.dispatchEvent(b)}for(;i;)i["on"+p]&&i["on"+p](b),i=i.parentNode},yt=function(i){if(!(!U(i)||tt(i))&&(_t=i.pointerId,i.type!=="mousedown"&&(P=!0),!(i.type==="mousedown"&&P))){var p=at(i);v=wt=p.pageX,j=ht=p.pageY,n=setTimeout(function(){ft(i.target,"longtap",i),c=i.target},S.longtapThreshold),x=nt(),mt++}},bt=function(i){if(!(!U(i)||tt(i))){if(_t=void 0,i.type==="mouseup"&&P){P=!1;return}var p=[],k=nt(),_=j-ht,b=v-wt;if(clearTimeout(d),clearTimeout(n),b<=-S.swipeThreshold&&p.push("swiperight"),b>=S.swipeThreshold&&p.push("swipeleft"),_<=-S.swipeThreshold&&p.push("swipedown"),_>=S.swipeThreshold&&p.push("swipeup"),p.length){for(var s=0;s<p.length;s++){var m=p[s];ft(i.target,m,i,{distance:{x:Math.abs(b),y:Math.abs(_)}})}mt=0}else v>=wt-S.tapPrecision&&v<=wt+S.tapPrecision&&j>=ht-S.tapPrecision&&j<=ht+S.tapPrecision&&x+S.tapThreshold-k>=0&&(ft(i.target,mt>=2&&c===i.target?"dbltap":"tap",i),c=i.target),d=setTimeout(function(){mt=0},S.dbltapThreshold)}},pt=function(i){if(!!U(i)&&!(i.type==="mousemove"&&P)){var p=at(i);wt=p.pageX,ht=p.pageY}},mt=0,_t,wt,ht,v,j,x,c,d,n;V(r,X.touchstart+(S.justTouchEvents?"":" mousedown"),yt),V(r,X.touchend+(S.justTouchEvents?"":" mouseup"),bt),V(r,X.touchmove+(S.justTouchEvents?"":" mousemove"),pt),u.tocca=function(i){for(var p in i)S[p]=i[p];return S}})(document,window);var ve=Pt(Ae()),ar=Pt(xe()),or=Pt(Se());var Gt=null,re=null;"PointerEvent"in window||(Cr(),"TouchEvent"in window||(ne(document,"mousedown","pointerdown"),ne(document,"mousemove","pointermove"),ne(document,"mouseup","pointerup")),ie(document,"touchstart","pointerdown"),ie(document,"touchmove","pointermove"),ie(document,"touchend","pointerup"));function Cr(){Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture}function ne(r,u,C){r.addEventListener(u,A=>{let S=new MouseEvent(C,A);S.pointerId=1,S.isPrimary=!0,S.pointerType="mouse",S.width=1,S.height=1,S.tiltX=0,S.tiltY=0,"buttons"in A&&A.buttons!==0?S.pressure=.5:S.pressure=0;let P=A.target;re!==null&&(P=re,u==="mouseup"&&(re=null)),P.dispatchEvent(S),S.defaultPrevented&&A.preventDefault()})}function ie(r,u,C){r.addEventListener(u,A=>{let S=A.changedTouches,P=S.length;for(let X=0;X<P;X++){let U=new CustomEvent(C,{bubbles:!0,cancelable:!0});U.ctrlKey=A.ctrlKey,U.shiftKey=A.shiftKey,U.altKey=A.altKey,U.metaKey=A.metaKey;let V=S.item(X);U.clientX=V.clientX,U.clientY=V.clientY,U.screenX=V.screenX,U.screenY=V.screenY,U.pageX=V.pageX,U.pageY=V.pageY;let at=V.target.getBoundingClientRect();U.offsetX=V.clientX-at.left,U.offsetY=V.clientY-at.top,U.pointerId=1+V.identifier,U.button=0,U.buttons=1,U.movementX=0,U.movementY=0,U.region=null,U.relatedTarget=null,U.x=U.clientX,U.y=U.clientY,U.pointerType="touch",U.width=1,U.height=1,U.tiltX=0,U.tiltY=0,U.pressure=1,u==="touchstart"&&Gt===null&&(Gt=V.identifier),U.isPrimary=V.identifier===Gt,u==="touchend"&&U.isPrimary&&(Gt=null),A.target.dispatchEvent(U),U.defaultPrevented&&A.preventDefault()}})}var Ge=Pt(Ce());var je=Pt(De()),Me=Pt(Ue()),ce="Waiting for database";self.importScripts&&importScripts("version.js");var Br=self.indexedDB||self.webkitIndexedDB||self.mozIndexedDB||self.msIndexedDB,zt={main:"main",tracks:"tracks"},Ot,Mt;Mt=Br.open("diffuse",1);Mt.onupgradeneeded=r=>{r.target.result.createObjectStore(zt.main),r.target.result.createObjectStore(zt.tracks)};Mt.onsuccess=r=>{Ot=Mt.result,Lr({key:"VERSION",data:self.VERSION})};Mt.onerror=r=>{console.error("IndexedDB error: "+r.target.error)};var Wt=r=>le(()=>new Promise((u,C)=>{if(!Ot)throw new Error(ce);let A=r.store||zt.main,S=r.key,X=Ot.transaction([A],"readonly").objectStore(A).get(S);X.onsuccess=U=>{X.result?u(X.result):u(null)},X.onerror=C})),We=r=>le(()=>new Promise((u,C)=>{if(!Ot)throw new Error(ce);let A=(r||{}).store||zt.main,P=Ot.transaction([A],"readonly").objectStore(A).getAllKeys();P.onsuccess=X=>{P.result?u(P.result):u(null)},P.onerror=C})),Lr=r=>le(()=>new Promise((u,C)=>{if(!Ot)throw new Error(ce);let A=r.store||zt.main,S=r.key,P=r.data,U=Ot.transaction([A],"readwrite").objectStore(A).put(P,S);U.onsuccess=u,U.onerror=C}));function le(r){return(0,Me.default)(r,{onFailedAttempt:u=>(0,je.default)(250),retries:20})}var Ze=location.host==="localhost:5000",He={api:"https://runfission.net",lobby:"https://auth.runfission.net",user:"fissionuser.net"},de=(r,u=250,C)=>(...A)=>clearTimeout(C,C=setTimeout(r,u,...A)),Xe=(r,u=250,C,A)=>(...S)=>{A=S,!C&&(C=!0,setTimeout(()=>{r(...A),C=!1},u))};function Ye(r){switch(r.toLowerCase().split("/")[1]){case"mp3":return"mp3";case"mpeg":return"mp3";case"mp4a-latm":return"m4a";case"mp4":return"m4a";case"x-m4a":return"m4a";case"flac":return"flac";case"ogg":return"ogg";case"wav":return"wav";case"wave":return"wav";case"webm":return"webm"}}function fe(r){let u=r.split("://");switch(u[0]){case"dropbox":{let C=u[1].split("@"),A=C[0],S=C[1];return fetch("https://api.dropboxapi.com/2/files/get_temporary_link",{method:"POST",body:JSON.stringify({path:S}),headers:new Headers({Authorization:"Bearer "+A,"Content-Type":"application/json"})}).then(P=>P.json()).then(P=>P.link)}default:return Promise.resolve(r)}}var Nr=!!navigator.platform.match(/iPhone|iPod|iPad/)||navigator.vendor==="Apple Computer, Inc.",At;window.AudioContext?At=new window.AudioContext:window.webkitAudioContext&&(At=new window.webkitAudioContext);self.context=At;var Zt=Nr;function he(){return Zt}var Dt=(()=>{let r,u=["height: 0","width: 0","visibility: hidden","pointer-events: none"];return r=document.createElement("div"),r.setAttribute("class","absolute left-0 top-0"),r.setAttribute("style",u.join("; ")),r})();function Fr(){document.body.appendChild(Dt)}var Ke="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV";function qe(r){Fr(),Zt&&pe(r,{url:Ke,trackId:""}).then(u=>{let C=()=>{r.audio&&r.audio.play(),document.body.removeEventListener("click",C)};document.body.addEventListener("click",C)})}var Bt,Lt,Rt,Nt;Bt=At.createGain();Bt.gain.value=1;Lt=At.createBiquadFilter();Rt=At.createBiquadFilter();Nt=At.createBiquadFilter();Lt.type="lowshelf";Rt.type="peaking";Nt.type="highshelf";Lt.frequency.value=250;Rt.frequency.value=2750;Rt.Q.value=1;Nt.frequency.value=8e3;Bt.connect(Lt);Lt.connect(Rt);Rt.connect(Nt);Nt.connect(At.destination);function Ur(r,u){switch(r){case"VOLUME":return u;default:return u<0?u*50:u*15}}function Ve(r,u){let C;switch(r){case"LOW":C=Lt;break;case"MID":C=Rt;break;case"HIGH":C=Nt;break;case"VOLUME":C=Bt;break}C.gain.setValueAtTime(Ur(r,u),At.currentTime)}function pe(r,u,C){if(u.url==null&&console.error("insertTrack, missing `url`"),u.trackId==null&&console.error("insertTrack, missing `trackId`"),r.app.ports.setAudioHasStalled.send(!1),r.app.ports.setAudioPosition.send(0),clearTimeout(r.unstallTimeout),Ht=1,At.resume&&At.state!=="running"&&At.resume(),"mediaSession"in navigator&&u.trackTags){let P=[];C&&typeof C!="string"&&(P=[{src:URL.createObjectURL(C),type:C.type}]),navigator.mediaSession.metadata=new MediaMetadata({title:u.trackTags.title,artist:u.trackTags.artist,album:u.trackTags.album,artwork:P})}let A=u.isCached?Wt({key:u.trackId,store:zt.tracks}).then(Kr):fe(u.url),S;return A.then(P=>{u=Object.assign({},u,{url:P}),(S=Dt.querySelector("audio"))&&Zt?(S.setAttribute("src",u.url),S.setAttribute("rel",u.trackId),S.load()):(S=Je(u))?(S.setAttribute("data-preload","f"),S.setAttribute("data-timestamp",Date.now()),S.context=At.createMediaElementSource(S),S.context.connect(Bt),S.readyState>=4?_e(S,u,r.app):(r.app.ports.setAudioIsLoading.send(!0),S.load())):(S=Qe(r,u,Date.now()),S.context=At.createMediaElementSource(S),S.context.connect(Bt)),r.audio=S})}function Je(r){return Dt.querySelector(`[rel="${r.trackId}"]`)}function Qe(r,u,C,A){let S,P=U=>V=>{nr(r,V.target)&&U.call(r,V)},X=u.url.includes("service_worker_authentication")?"use-credentials":"anonymous";return S=new Audio,S.setAttribute("crossorigin",X),S.setAttribute("data-preload",A?"t":"f"),S.setAttribute("data-timestamp",C),S.setAttribute("preload",Zt?"none":"auto"),S.setAttribute("rel",u.trackId),S.setAttribute("src",u.url),S.crossorigin="anonymous",S.volume=1,S.addEventListener("canplay",P(Yr)),S.addEventListener("ended",P(Zr)),S.addEventListener("error",P(jr)),S.addEventListener("loadstart",P(er)),S.addEventListener("loadeddata",P(rr)),S.addEventListener("pause",P(Xr)),S.addEventListener("play",P(Hr)),S.addEventListener("seeking",P(er)),S.addEventListener("seeked",P(rr)),S.addEventListener("timeupdate",P(Wr)),S.load(),Dt.appendChild(S),S}function $e(r,u){Je(u)||(Dt.querySelectorAll('[data-preload="t"]').forEach(C=>C.parentNode.removeChild(C)),fe(u.url).then(C=>{let A=Object.assign({},u,{url:C});Qe(r,A,Date.now()+1e3*60*60*2,!0)}))}function tr(r,u){r&&!isNaN(r.duration)&&(r.paused&&r.play(),r.currentTime=r.duration*u)}var qt=!1,Ht=1;function jr(r){switch(this.app.ports.setAudioIsPlaying.send(!1),r.target.error.code){case r.target.error.MEDIA_ERR_ABORTED:console.error("You aborted the audio playback.");break;case r.target.error.MEDIA_ERR_NETWORK:console.error("A network error caused the audio download to fail."),me.call(this),ge.call(this,r);break;case r.target.error.MEDIA_ERR_DECODE:console.error("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case r.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.error("The audio not be loaded, either because the server or network failed or because the format is not supported."),r.target.currentTime&&r.target.currentTime>0?(me.call(this),ge.call(this,r)):navigator.onLine?(Mr.call(this),clearTimeout(this.loadingTimeoutId),this.app.ports.setAudioIsLoading.send(!1)):(me.call(this),ge.call(this,r));break;default:console.error("An unknown error occurred.")}}function me(){qt||(qt=!0,this.app.ports.showErrorNotification.send(navigator.onLine?"I can't play this track because of a network error. I'll try to reconnect.":"I can't play this track because we're offline. I'll try to reconnect."))}function Mr(){this.app.ports.showErrorNotification.send("__I can't play this track because your browser didn't recognize it.__ Try checking your developer console for a warning to find out why.")}function ge(r,u){this.app.ports.setAudioIsLoading.send(!0),clearTimeout(this.unstallTimeout),(Ht>=3||u)&&this.app.ports.setAudioHasStalled.send(!0),setTimeout(C=>{nr(this,r.target)&&Vr.call(this,r.target)},Ht*2500),Ht++}function Wr(r){let u=r.target;if(isNaN(u.duration)||isNaN(u.currentTime)||u.duration===0)return;ir.call(this,u),this.app.ports.setAudioPosition.send(u.currentTime),navigator.mediaSession&&navigator.mediaSession.setPositionState&&navigator.mediaSession.setPositionState({duration:u.duration,position:u.currentTime});let C=u.currentTime/u.duration;u.duration>=30*60&&qr(this,C)}function Zr(r){this.repeat?_e(r.target,this.activeQueueItem,this.app):(this.app.ports.noteProgress.send({trackId:this.activeQueueItem.trackId,progress:1}),this.app.ports.activeQueueItemEnded.send(null))}function er(r){clearTimeout(this.loadingTimeoutId),this.loadingTimeoutId=setTimeout(()=>{if(this.audio)this.audio.readyState===4&&this.audio.currentTime===0?this.app.ports.setAudioIsLoading.send(!1):this.app.ports.setAudioIsLoading.send(!0);else return},1750)}function rr(r){clearTimeout(this.loadingTimeoutId),this.app.ports.setAudioHasStalled.send(!1),this.app.ports.setAudioIsLoading.send(!1),r.target.paused&&_e(r.target,this.activeQueueItem,this.app)}function Hr(r){this.app.ports.setAudioIsPlaying.send(!0),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing"),this.scrobbleTimer&&this.scrobbleTimer.start()}function Xr(r){this.app.ports.setAudioIsPlaying.send(!1),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused"),this.scrobbleTimer&&this.scrobbleTimer.pause()}function Yr(r){qt=!1,ir.call(this,r.target)}function Gr(r){return r?r.getAttribute("rel"):void 0}function Kr(r){return URL.createObjectURL(r)}function nr(r,u){return!r.activeQueueItem||!u||u.getAttribute("data-preload")==="t"?!1:r.activeQueueItem.trackId===Gr(u)}function _e(r,u,C){u.progress&&r.duration&&(r.currentTime=u.progress*r.duration),(r.play()||Promise.resolve()).catch(S=>{Zt=!0;let P="Couldn't play audio automatically. Please resume playback manually.";console.error(P,S),C&&C.ports.fromAlien.send({tag:"",data:null,error:P})})}var qr=Xe((r,u)=>{r.app.ports.noteProgress.send({trackId:r.activeQueueItem.trackId,progress:u})},3e4),Ft=0;function ir(r){if(r.duration===Ft||(this.app.ports.setAudioDuration.send(r.duration||0),Ft=r.duration,!Ft||Ft<30))return;let u=Math.floor(Date.now()/1e3),C=Math.min(240+.5,Ft/1.95),A=r.getAttribute("rel");this.scrobbleTimer=new Ge.default({onend:S=>this.app.ports.scrobble.send({duration:Math.round(Ft),timestamp:u,trackId:A})}),this.scrobbleTimer.start(C)}function Vr(r){let u=r.currentTime;r.load(),r.currentTime=u,Ht>5&&!qt&&navigator.onLine&&this.app.ports.showStickyErrorNotification.send("You loaded too many tracks too quickly, which the browser can't handle. You'll most likely have to reload the browser.")}function sr(r){Dt.querySelectorAll("audio[data-timestamp]").forEach(C=>{parseInt(C.getAttribute("data-timestamp"),10)>=r||(C.context&&(C.context.disconnect(),C.context=null),C.src=Ke,Dt.removeChild(C))})}location.hostname.endsWith("diffuse.sh")&&location.protocol==="http:"?(location.href=location.href.replace("http://","https://"),ye("Just a moment, redirecting to HTTPS.")):self.isSecureContext?"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then(Jr,r=>(console.error(r),ye(location.protocol==="https:"?"Failed to start the service worker.":"Failed to start the service worker, try using HTTPS."))):ye(`
    This app only works on a <a class="underline" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#When_is_a_context_considered_secure">secure context</a>, HTTPS & localhost, and modern browsers.
  `);var dt,xt={};function Jr(){dt=Elm.UI.init({node:document.getElementById("elm"),flags:{darkMode:hn().matches,initialTime:Date.now(),isOnline:navigator.onLine,upgrade:gn(),viewport:{height:window.innerHeight,width:window.innerWidth}}}),self.app=dt,xt.brain(),xt.audio(),xt.backdrop(),xt.clipboard(),xt.covers(),xt.webnative()}function ye(r){let u=document.createElement("div");u.className="flex flex-col font-body items-center h-screen italic justify-center leading-relaxed px-4 text-center text-base text-white",u.innerHTML=`
    <a class="block logo mb-5" href="../">
      <img src="../images/diffuse-light.svg" />
    </a>

    <p class="opacity-60">
      ${r}
    </p>
  `,document.body.appendChild(u);let C=document.querySelector("#elm");C&&C.parentNode.removeChild(C)}var Vt;xt.brain=()=>{Vt=new Worker("brain.js#appHref="+encodeURIComponent(window.location.href)),Vt.onmessage=r=>{if(r.data.action)return Qr(r.data.action,r.data.data,r.ports);switch(r.data.tag&&dt.ports.fromAlien.send(r.data),r.data.tag){case"GOT_CACHED_COVER":return dn(r.data.data)}},dt.ports.toBrain.subscribe(r=>Vt.postMessage(r))};function Qr(r,u,C){switch(r){case"DOWNLOAD_TRACKS":return pn(u);case"SETUP_WEBNATIVE_IFRAME":return on(C)}}var gt;xt.audio=()=>{gt={activeQueueItem:null,audio:null,app:dt,repeat:!1},qe(gt),dt.ports.activeQueueItemChanged.subscribe($r),dt.ports.adjustEqualizerSetting.subscribe(tn),dt.ports.pause.subscribe(en),dt.ports.play.subscribe(rn),dt.ports.preloadAudio.subscribe(nn()),dt.ports.seek.subscribe(sn),dt.ports.setRepeat.subscribe(an)};function $r(r){if(gt.activeQueueItem&&r&&r.trackId===gt.activeQueueItem.trackId){gt.audio.currentTime=0;return}let u=Date.now();if(gt.activeQueueItem=r,gt.audio=null,gt.coverPrep=null,gt.scrobbleTimer&&(gt.scrobbleTimer.stop(),gt.scrobbleTimer=null),he()||sr(u),r){let C={cacheKey:btoa(unescape(encodeURIComponent(r.trackTags.artist+" --- "+r.trackTags.album))),trackFilename:r.trackPath.split("/").reverse()[0],trackPath:r.trackPath,trackSourceId:r.sourceId,variousArtists:"f"};cr(C.cacheKey).then(A=>{A=A==="TRIED"?null:A,gt.coverPrep=C,pe(gt,r,A),A||dr([C])})}else dt.ports.setAudioIsPlaying.send(!1),dt.ports.setAudioPosition.send(0),navigator.mediaSession&&(navigator.mediaSession.playbackState="none")}function tn(r){Ve(r.knob,r.value)}function en(r){gt.audio&&gt.audio.pause()}function rn(r){gt.audio&&gt.audio.play()}function nn(){return de(r=>{he()||r.isCached||$e(gt,r)},15e3)}function sn(r){tr(gt.audio,r)}function an(r){gt.repeat=r}var Xt;xt.webnative=()=>{dt.ports.webnativeRequest.subscribe(r=>{ur().then(()=>{self.webnativeElm.request({app:dt,request:r})})})};function ur(){return Xt?Promise.resolve():(0,ve.default)("vendor/webnative.min.js").then(()=>(0,ve.default)("vendor/webnative-elm.min.js")).then(()=>{Xt=window.webnative,["localhost","nightly.diffuse.sh"].includes(location.hostname)&&Xt.setup.debug({enabled:!0}),Ze&&Xt.setup.endpoints(He)})}function on(r){ur().then(u=>Xt.ipfs.iframe()).then(u=>r[0].postMessage("connect",[u]))}xt.backdrop=()=>{dt.ports.pickAverageBackgroundColor.subscribe(cn)};function un(r){let u=document.createElement("canvas"),C=u.getContext("2d");u.width=r.naturalWidth,u.height=r.naturalHeight,C.drawImage(r,0,0);let A=C.getImageData(0,0,u.width,u.height),S={r:0,g:0,b:0};for(let P=0,X=A.data.length;P<X;P+=4)S.r+=A.data[P],S.g+=A.data[P+1],S.b+=A.data[P+2];return S.r=Math.floor(S.r/(A.data.length/4)),S.g=Math.floor(S.g/(A.data.length/4)),S.b=Math.floor(S.b/(A.data.length/4)),S}function cn(r){let u=document.querySelector(`img[src$="${r}"]`);if(u){let C=un(u);dt.ports.setAverageBackgroundColor.send(C)}}xt.clipboard=()=>{dt.ports.copyToClipboard.subscribe(ln)};function ln(r){let u=document.createElement("textarea");u.value=r,u.setAttribute("readonly",""),u.style.position="absolute",u.style.left="-9999px",document.body.appendChild(u);let C=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;u.select(),document.execCommand("copy"),document.body.removeChild(u),C&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(C))}xt.covers=()=>{dt.ports.loadAlbumCovers.subscribe(de(lr,500)),We().then(fn)};function cr(r){return Wt({key:`coverCache.${r}`})}function dn({key:r,url:u}){let C=gt.activeQueueItem;C&&r===gt.coverPrep.key&&(navigator.mediaSession.metadata=new MediaMetadata({title:C.trackTags.title,artist:C.trackTags.artist,album:C.trackTags.album,artwork:[{src:u}]}))}function lr({coverView:r,list:u}={}){let C=[];if(u&&(C=C.concat(Array.from(document.querySelectorAll("#diffuse__track-covers [data-key]")))),r&&(C=C.concat(Array.from(document.querySelectorAll("#diffuse__track-covers + div [data-key]")))),!C.length)return;let A=C.map(S=>({cacheKey:S.getAttribute("data-key"),trackFilename:S.getAttribute("data-filename"),trackPath:S.getAttribute("data-path"),trackSourceId:S.getAttribute("data-source-id"),variousArtists:S.getAttribute("data-various-artists")}));return dr(A)}function dr(r){return r.reduce((u,C)=>u.then(A=>cr(C.cacheKey).then(S=>S?A:A.concat([C]))),Promise.resolve([])).then(u=>{Vt.postMessage({action:"DOWNLOAD_ARTWORK",data:u})})}function fn(r){r.filter(A=>A.startsWith("coverCache.")).reduce((A,S)=>A.then(P=>Wt({key:S}).then(X=>{let U=S.slice(11);return X&&typeof X!="string"&&(P[U]=URL.createObjectURL(X)),P})),Promise.resolve({})).then(A=>{dt.ports.insertCoverCache.send(A),setTimeout(()=>lr({list:!0,coverView:!0}),500)})}function hn(){let r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");return r&&r.addEventListener&&r.addEventListener("change",u=>{dt.ports.preferredColorSchemaChanged.send({dark:u.matches})}),r}function pn(r){let u=new ar.default,C=u.folder("Diffuse - "+r.name);return r.tracks.reduce((A,S)=>A.then(P=>fetch(S.url)).then(P=>{let X=P.headers.get("content-type"),U=Ye(X)||"unknown";return P.blob().then(V=>C.file(S.filename+"."+U,V))}),Promise.resolve()).then(A=>u.generateAsync({type:"blob"})).then(A=>{(0,or.saveAs)(A,"Diffuse - "+r.name+".zip"),dt.ports.downloadTracksFinished.send(null)})}document.body.addEventListener("click",r=>{(r.target.matches("button, a")||r.target.closest("button, a"))&&mn()});function mn(){let r=document.activeElement;r&&!r.dataset.keepFocus&&r.blur()}window.addEventListener("blur",r=>{dt&&r.target===window&&dt.ports.lostWindowFocus.send(null)});var fr="input, textarea";document.addEventListener("keyup",r=>{let u=r.target.closest(fr);u&&u.setAttribute("changed","")});document.addEventListener("click",r=>{if(r.target.tagName!=="BUTTON")return;let u=r.target.closest("form");u&&hr(u)});document.addEventListener("submit",r=>{let u=r.target.closest("form");u&&hr(u)});function hr(r){[].slice.call(r.querySelectorAll(fr)).forEach(u=>{u.setAttribute("changed","")})}window.addEventListener("online",pr);window.addEventListener("offline",pr);function pr(){dt.ports.setIsOnline.send(navigator.onLine)}document.addEventListener("MediaPlayPause",()=>{dt.ports.requestPlayPause.send(null)});document.addEventListener("MediaStop",()=>{dt.ports.requestStop.send(null)});document.addEventListener("MediaPrev",()=>{dt.ports.requestPrevious.send(null)});document.addEventListener("MediaNext",()=>{dt.ports.requestNext.send(null)});"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{dt.ports.requestPlay.send(null)}),navigator.mediaSession.setActionHandler("pause",()=>{dt.ports.requestPause.send(null)}),navigator.mediaSession.setActionHandler("previoustrack",()=>{dt.ports.requestPrevious.send(null)}),navigator.mediaSession.setActionHandler("nexttrack",()=>{dt.ports.requestNext.send(null)}),navigator.mediaSession.setActionHandler("seekbackward",r=>{let u=gt.audio,C=r.seekOffset||10;u&&(u.currentTime=Math.max(u.currentTime-C,0))}),navigator.mediaSession.setActionHandler("seekforward",r=>{let u=gt.audio,C=r.seekOffset||10;u&&(u.currentTime=Math.min(u.currentTime+C,u.duration))}),navigator.mediaSession.setActionHandler("seekto",r=>{let u=gt.audio;u&&(u.currentTime=r.seekTime)}));var Ct;tocca({dbltapThreshold:400,tapThreshold:250});function mr(r,u){let C=new MouseEvent(r,u);return C.pointerId=1,C.isPrimary=!0,C.pointerType="mouse",C.width=1,C.height=1,C.tiltX=0,C.tiltY=0,"buttons"in u&&u.buttons!==0?C.pressure=.5:C.pressure=0,C}function gr(r,u,C){let A=new CustomEvent(r,{bubbles:!0,cancelable:!0});A.ctrlKey=u.ctrlKey,A.shiftKey=u.shiftKey,A.altKey=u.altKey,A.metaKey=u.metaKey,A.clientX=C.clientX,A.clientY=C.clientY,A.screenX=C.screenX,A.screenY=C.screenY,A.pageX=C.pageX,A.pageY=C.pageY;let S=C.target.getBoundingClientRect();return A.offsetX=C.clientX-S.left,A.offsetY=C.clientY-S.top,A.pointerId=1+C.identifier,A.button=0,A.buttons=1,A.movementX=0,A.movementY=0,A.region=null,A.relatedTarget=null,A.x=A.clientX,A.y=A.clientY,A.pointerType="touch",A.width=1,A.height=1,A.tiltX=0,A.tiltY=0,A.pressure=1,A.isPrimary=!0,A}self.PointerEvent||document.addEventListener("mouseover",r=>{let u=document.body.querySelector("section"),A=u&&u.classList.contains("dragging-something")&&document.elementFromPoint(r.clientX,r.clientY);A&&A!=Ct&&(Ct&&Ct.dispatchEvent(mr("pointerleave",r)),A.dispatchEvent(mr("pointerenter",r)),Ct=A)});document.body.addEventListener("touchmove",r=>{let u=document.body.querySelector("section"),C=u&&u.classList.contains("dragging-something"),A=r.touches[0],S;C&&A&&(S=document.elementFromPoint(A.clientX,A.clientY)),S&&S!=Ct&&(Ct&&Ct.dispatchEvent(gr("pointerleave",r,A)),S.dispatchEvent(gr("pointerenter",r,A)),Ct=S),C&&r.stopPropagation()});window.addEventListener("touchstart",function r(){dt.ports.indicateTouchDevice.send(null),window.removeEventListener("touchstart",r,!1)},!1);function gn(){let r=!!localStorage.getItem("additional-userdata");return r&&localStorage.removeItem("additional-userdata"),r}_r();window.addEventListener("resize",()=>{setTimeout(_r,0)});function _r(){let r=document.documentElement.clientHeight*.01;document.documentElement.style.setProperty("--vh",`${r}px`)}})();
/*!

JSZip v3.6.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
/*! load-script2. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
